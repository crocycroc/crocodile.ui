var mr=Math.round;var ms=Math.sin;var mc=Math.cos;var abs=Math.abs;var sqrt=Math.sqrt;function createMatrixIdentity(){return[[1,0,0],[0,1,0],[0,0,1]]}function matrixMultiply(m1,m2){var result=createMatrixIdentity();for(var x=0;x<3;x++){for(var y=0;y<3;y++){var sum=0;for(var z=0;z<3;z++){sum+=m1[x][z]*m2[z][y]}result[x][y]=sum}}return result}function copyState(o1,o2){if(o1===undefined){return}o2.fillStyle=o1.fillStyle;o2.lineCap=o1.lineCap;o2.lineJoin=o1.lineJoin;o2.lineWidth=o1.lineWidth;o2.miterLimit=o1.miterLimit;o2.shadowBlur=o1.shadowBlur;o2.shadowColor=o1.shadowColor;o2.shadowOffsetX=o1.shadowOffsetX;o2.shadowOffsetY=o1.shadowOffsetY;o2.strokeStyle=o1.strokeStyle;o2.globalAlpha=o1.globalAlpha;o2.font=o1.font;o2.textBaseline=o1.textBaseline;o2.textAlign=o1.textAlign}function CanvasWrapper(ctx){this.m_=createMatrixIdentity();this.mStack_=[];this.aStack_=[];this.canvas=ctx;this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=1;this.globalAlpha=1}var cwPrototype=CanvasWrapper.prototype;cwPrototype.applyContextProperties=function(){this.canvas.strokeStyle=this.strokeStyle;this.canvas.fillStyle=this.fillStyle;this.canvas.lineWidth=this.lineWidth;this.canvas.lineJoin=this.lineJoin;this.canvas.lineCap=this.lineCap;this.canvas.miterLimit=this.miterLimit;this.canvas.globalAlpha=this.globalAlpha;this.canvas.font=this.font;this.canvas.textBaseline=this.textBaseline;this.canvas.textAlign=this.textAlign};cwPrototype.beginPath=function(){this.canvas.beginPath()};cwPrototype.moveTo=function(aX,aY){this.canvas.moveTo(aX,aY);var p=this.getCoords(aX,aY);this.currentX_=p.x;this.currentY_=p.y};cwPrototype.getImageData=function(x,y,length,breath){return this.canvas.getImageData(x,y,length,breath)};cwPrototype.measureText=function(line){this.applyContextProperties();return this.canvas.measureText(line)};cwPrototype.lineTo=function(aX,aY){this.applyContextProperties();this.canvas.lineTo(aX,aY);var p=this.getCoords(aX,aY);this.currentX_=p.x;this.currentY_=p.y};cwPrototype.bezierCurveTo=function(aCP1x,aCP1y,aCP2x,aCP2y,aX,aY){this.applyContextProperties();this.canvas.bezierCurveTo(aCP1x,aCP1y,aCP2x,aCP2y,aX,aY);var p=this.getCoords(aX,aY);this.currentX_=p.x;this.currentY_=p.y};cwPrototype.quadraticCurveTo=function(aCPx,aCPy,aX,aY){this.applyContextProperties();this.canvas.quadraticCurveTo(aCPx,aCPy,aX,aY);var p=this.getCoords(aX,aY);this.currentX_=p.x;this.currentY_=p.y};cwPrototype.arc=function(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){this.applyContextProperties();this.canvas.arc(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise)};cwPrototype.arcTo=function(x1,y1,x2,y2,radius){this.applyContextProperties();this.canvas.arcTo(x1,y1,x2,y2,radius)};cwPrototype.rect=function(aX,aY,aWidth,aHeight){this.applyContextProperties();this.canvas.rect(aX,aY,aWidth,aHeight);var p=this.getCoords(aX,aY);this.currentX_=p.x;this.currentY_=p.y};cwPrototype.clip=function(){this.applyContextProperties();this.canvas.clip()};cwPrototype.strokeRect=function(aX,aY,aWidth,aHeight){this.applyContextProperties();this.canvas.strokeRect(aX,aY,aWidth,aHeight);var p=this.getCoords(aX,aY);this.currentX_=p.x;this.currentY_=p.y};cwPrototype.fillRect=function(aX,aY,aWidth,aHeight){this.applyContextProperties();this.canvas.fillRect(aX,aY,aWidth,aHeight);var p=this.getCoords(aX,aY);this.currentX_=p.x;this.currentY_=p.y};cwPrototype.createLinearGradient=function(aX0,aY0,aX1,aY1){this.applyContextProperties();return this.canvas.createLinearGradient(aX0,aY0,aX1,aY1)};cwPrototype.createRadialGradient=function(aX0,aY0,aR0,aX1,aY1,aR1){this.applyContextProperties();return this.canvas.createRadialGradient(aX0,aY0,aR0,aX1,aY1,aR1)};cwPrototype.stroke=function(aPath){this.applyContextProperties();if(aPath){this.canvas.stroke(aPath)}else{this.canvas.stroke()}};cwPrototype.fill=function(){this.applyContextProperties();this.canvas.fill()};cwPrototype.setLineDash=function(value){this.applyContextProperties();this.canvas.setLineDash(value)};cwPrototype.getLineDash=function(){return this.canvas.getLineDash()};cwPrototype.fillText=function(text,x,y){this.applyContextProperties();this.canvas.fillText(text,x,y)};cwPrototype.clearRect=function(aX,aY,aWidth,aHeight){this.canvas.clearRect(aX,aY,aWidth,aHeight)};cwPrototype.closePath=function(){this.canvas.closePath()};cwPrototype.getCoords=function(aX,aY){var m=this.m_;return{x:aX*m[0][0]+aY*m[1][0]+m[2][0],y:aX*m[0][1]+aY*m[1][1]+m[2][1]}};cwPrototype.save=function(){this.canvas.save();var o={};copyState(this,o);this.aStack_.push(o);this.mStack_.push(this.m_);this.m_=matrixMultiply(createMatrixIdentity(),this.m_)};cwPrototype.restore=function(){this.canvas.restore();copyState(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};function matrixIsFinite(m){for(var j=0;j<3;j++){for(var k=0;k<2;k++){if(!isFinite(m[j][k])||isNaN(m[j][k])){return false}}}return true}function setM(ctx,m){if(!matrixIsFinite(m)){return}ctx.m_=m}cwPrototype.setMatrix=function(matrix){this.setTransform(matrix[0][0],matrix[0][1],matrix[1][0],matrix[1][1],matrix[2][0],matrix[2][1])};cwPrototype.getMatrix=function(){return this.m_};cwPrototype.translate=function(aX,aY){this.canvas.translate(aX,aY);var m1=[[1,0,0],[0,1,0],[aX,aY,1]];setM(this,matrixMultiply(m1,this.m_))};cwPrototype.rotate=function(aRot){this.canvas.rotate(aRot);var c=mc(aRot);var s=ms(aRot);var m1=[[c,s,0],[-s,c,0],[0,0,1]];setM(this,matrixMultiply(m1,this.m_))};cwPrototype.scale=function(aX,aY){this.canvas.scale(aX,aY);var m1=[[aX,0,0],[0,aY,0],[0,0,1]];setM(this,matrixMultiply(m1,this.m_))};cwPrototype.transform=function(m11,m12,m21,m22,dx,dy){this.canvas.transform(m11,m12,m21,m22,dx,dy);var m1=[[m11,m12,0],[m21,m22,0],[dx,dy,1]];setM(this,matrixMultiply(m1,this.m_))};cwPrototype.setTransform=function(m11,m12,m21,m22,dx,dy){this.canvas.setTransform(m11,m12,m21,m22,dx,dy);var m=[[m11,m12,0],[m21,m22,0],[dx,dy,1]];setM(this,m)};cwPrototype.drawImage=function(img,x,y){return this.canvas.drawImage(img,x,y)};cwPrototype.isPointInPath=function(x,y){return this.canvas.isPointInPath(x,y)};var determineFontHeightCache={};function fastHitArrayTest(arr){var i=0,len=arr.length;while(i!=len){if(arr[i]!==255||arr[i]!==0){return true}i++}return false}function determineFontHeight(fontStyle){if(determineFontHeightCache[fontStyle]!==undefined){return determineFontHeightCache[fontStyle]}var body=document.getElementsByTagName("body")[0];var dummy=document.createElement("span");var dummyText=document.createTextNode("M");dummy.appendChild(dummyText);dummy.style.font=fontStyle;body.appendChild(dummy);var result=dummy.offsetHeight-dummy.offsetHeight/3;body.removeChild(dummy);determineFontHeightCache[fontStyle]=result;return result}function getTextWidthDOM(text,font){var f=font||"12px arial";var body=document.getElementsByTagName("body")[0];var dummy=document.createElement("span");var dummyText=document.createTextNode(text);dummy.appendChild(dummyText);dummy.style.font=f;dummy.style.float="left";dummy.style.whiteSpace="nowrap";body.appendChild(dummy);var result=dummy.offsetWidth;body.removeChild(dummy);return result}function guid(){function _p8(s){var p=(Math.random().toString(16)+"000000000").substr(2,8);return s?"-"+p.substr(0,4)+"-"+p.substr(4,4):p}return _p8()+_p8(true)+_p8(true)+_p8()}function CrocBase(root){if(root!==this){if(typeof root!=="object"||root.getRoot()!==root){this.error("Was passed a root that may not in fact be a root!")}}this.uuid=guid();this.parent=null;this.children=[];this.lastTransform=[1,0,0,1,0,0];this.width=0;this.height=0;this.visible=true;this.enabled=true;this.targetWidth=null;this.targetHeight=null;this.scaling="none";this.localHitCoord={x:0,y:0};this.root=root;this.listeners={}}CrocBase.prototype.event=function(eventType,eventData,cascadeEvent){cascadeEvent=cascadeEvent||false;var retValue=true;if(eventType in this.listeners){for(var i=0;i<this.listeners[eventType].length;i++){if(!this.listeners[eventType][i].call(this,eventData)){retValue=false}}}if(cascadeEvent&&retValue){for(var i=0;i<this.children;i++){if(!this.children[i].event(eventType,eventData,cascadeEvent)){retValue=false}}}if(eventType!=="event"){this.event("event",{type:eventType,data:eventData},false)}return retValue};CrocBase.prototype.error=function(type){var sourceString=this.constructor.name;var currentCaller=arguments.callee.caller;var currentProto=this.constructor.prototype;while(true){var currentProtoKeys=Object.keys(currentProto);for(var i=0;i<currentProtoKeys.length;i++){var currentKey=currentProtoKeys[i];var currentPrototypeProperty=this[currentKey];if(typeof currentPrototypeProperty==="function"){if(currentPrototypeProperty===currentCaller){sourceString=currentProto.constructor.name+".prototype."+currentKey;break}}}currentProto=currentProto.__proto__;if(currentProto===null||currentProto.length===0){break}}var constructor=null;if(currentProto!==null){constructor=currentProto.constructor}var err=new Error;console.trace();console.log("Error: "+sourceString+" : "+type);this.event("error",{type:type,constructor:constructor,attribute:currentProto,source:sourceString,stack:err.stack},false)};CrocBase.prototype.addEventListener=function(event,callback){if(!(event in this.listeners)){this.listeners[event]=[]}if(callback in this.listeners[event]){return}this.listeners[event].push(callback);return callback};CrocBase.prototype.removeEventListener=function(event,callback){if(!(event in this.listeners)){return false}var index=this.listeners[event].indexOf(callback);if(index>-1){this.listeners[event].splice(index,1)}};CrocBase.prototype.removeAllEventListeners=function(event){if(event===undefined){this.listeners={};return true}if(!(event in this.listeners)){return false}this.listeners[event]=[];return true};CrocBase.prototype.addChild=function(uiObject){if(typeof uiObject!=="object"){this.error("Not a UIObject!");console.trace();return false}if(uiObject.setParent(this)===false){this.error("Unable to set UIObject's parent to this!");console.trace();return false}this.children.push(uiObject);this.getRoot().repaint();return true};CrocBase.prototype.addChildren=function(uiObjectList){for(var i=0;i<uiObjectList.length;i++){this.addChild(uiObjectList[i])}return};CrocBase.prototype.removeChild=function(uiObject){var childIndex=this.children.indexOf(uiObject);if(childIndex<0){this.error("Has no UIObject!");return false}this.children.splice(childIndex,1);this.getRoot().repaint();return true};CrocBase.prototype.removeAllChildren=function(){this.children=[]};CrocBase.prototype.hasAncestor=function(uiObject){if(this.parent===null){return false}else if(this.parent===uiObject){return true}else{return this.parent.hasAncestor(uiObject)}};CrocBase.prototype.getRoot=function(){return this.root};CrocBase.prototype.setParent=function(parent){if(parent.hasAncestor(this)){this.error("Attempting to set parent would cause infinite child loop!");return false}this.parent=parent;return true};CrocBase.prototype.setChildren=function(uiObjectList){this.removeAllChildren();this.addChildren(uiObjectList)};CrocBase.prototype.setVisible=function(visible){if(this.visible!==visible){this.visible=visible;this.getRoot().repaint()}};CrocBase.prototype.getVisible=function(){return this.visible};CrocBase.prototype.setEnabled=function(enabled){this.enabled=enabled};CrocBase.prototype.getParent=function(){return this.parent};CrocBase.prototype.getChildren=function(){return this.children};CrocBase.prototype.childInFrontOf=function(uiObject,frontOfObject){var indexOfObject=this.children.indexOf(uiObject);var indexOfFront=this.children.indexOf(frontOfObject);if(indexOfObject<0||indexOfFront<0){return false}this.children.splice(indexOfObject,1);indexOfFront=this.children.indexOf(frontOfObject);this.children.splice(indexOfFront,0,uiObject);return true};CrocBase.prototype.childToFront=function(uiObject){if(this.children.indexOf(uiObject)<0){return false}this.children.splice(this.children.indexOf(uiObject),1);this.children.unshift(uiObject);this.getRoot().repaint();return true};CrocBase.prototype.childToBack=function(uiObject){if(this.children.indexOf(uiObject)<0){return false}this.children.splice(this.children.indexOf(uiObject),1);this.children.push(uiObject);this.getRoot().repaint();return true};CrocBase.prototype.getDescendants=function(){var retValue=[];retValue.push(this);retValue.push([]);for(var i=0;i<this.children.length;i++){retValue[1].push(this.children[i].getDescendants())}return retValue};CrocBase.prototype.getLocalHitCoord=function(){return this.localHitCoord};CrocBase.prototype.hitTest=function(context,x,y,width,height){var currentInvTransform=this.inverseTransform(context.getCurrentTransform());var p=this.transformPoint(currentInvTransform,x,y);var a={x:0,y:0};var d={x:this.getWidth(),y:this.getHeight()};this.localHitCoord=p;if(!this.visible){return null}if(p.x>a.x&&p.x<d.x&&p.y>a.y&&p.y<d.y){return this}return null};CrocBase.prototype.getWidth=function(){return this.width};CrocBase.prototype.getHeight=function(){return this.height};CrocBase.prototype.setTargetWidth=function(width){if(this.targetWidth!==width){this.targetWidth=width;this.getRoot().repaint()}};CrocBase.prototype.setTargetHeight=function(height){if(this.targetHeight!==height){this.targetHeight=height;this.getRoot().repaint()}};CrocBase.prototype.getTargetWidth=function(){return this.targetWidth};CrocBase.prototype.getTargetHeight=function(){return this.targetHeight};CrocBase.prototype.focus=function(){this.getRoot().setFocusedObject(this);this.event("focus");return};CrocBase.prototype.blur=function(){if(this.hasFocus()){this.getRoot().setFocusedObject(null);this.event("blur")}};CrocBase.prototype.hasFocus=function(){if(this.getRoot().focusedObject!==null){return this.getRoot().focusedObject.uuid===this.uuid}else{return false}};CrocBase.prototype.paint=function(context,width,height){this.lastTransform=context.getCurrentTransform();if(!this.visible){return}this.width=this.convertToPixels(this.targetWidth,width);this.height=this.convertToPixels(this.targetHeight,height);if(this.getVisible()){this.getRoot().testPaintWarnings(this,this.lastTransform)}return};CrocBase.prototype.applyClip=function(context,width,height){context.save();context.rect(0,0,width,height);context.clip()};CrocBase.prototype.removeClip=function(context){context.restore()};CrocBase.prototype.inverseTransform=function(t){var a=t[0];var b=t[1];var c=0;var d=t[2];var e=t[3];var f=0;var g=t[4];var h=t[5];var i=1;var A=e*i-f*h;var B=f*g-d*i;var C=d*h-e*g;var determinant=a*A+b*B+c*C;var oneOverDeterminant;if(determinant===0){return false}else{oneOverDeterminant=1/determinant;return[A*oneOverDeterminant,(c*h-b*i)*oneOverDeterminant,B*oneOverDeterminant,(a*i-c*g)*oneOverDeterminant,C*oneOverDeterminant,(b*g-a*h)*oneOverDeterminant]}};CrocBase.prototype.transformClipSpace=function(transform,width,height){var iMat=this.inverseTransform(transform);var vA=this.transformPoint(iMat,0,0);var vB=this.transformPoint(iMat,width,0);var vC=this.transformPoint(iMat,width,height);var vD=this.transformPoint(iMat,0,height);var width=Math.max(vA.x>0&&vA.y>0?vA.x:0,vB.x>0&&vB.y>0?vB.x:0,vC.x>0&&vC.y>0?vC.x:0,vD.x>0&&vD.y>0?vD.x:0);var height=Math.max(vA.x>0&&vA.y>0?vA.y:0,vB.x>0&&vB.y>0?vB.y:0,vC.x>0&&vC.y>0?vC.y:0,vD.x>0&&vD.y>0?vD.y:0);return{width:width,height:height}};CrocBase.prototype.transformPoint=function(t,x,y){var xP=t[0]*x+t[2]*y+t[4];var yP=t[1]*x+t[3]*y+t[5];return{x:xP,y:yP}};CrocBase.prototype.convertToPixels=function(value,reference){if(typeof value==="string"){if(value.indexOf("px",value.length-2)!==-1){return parseInt(value.substring(0,value.length-2))}else if(value.indexOf("%",value.length-1)!==-1){var percent=parseFloat(value.substring(0,value.length-1));return Math.round(reference*(percent/100))}}else if(typeof value==="number"){return value}else if(value===null||value===undefined){return reference}return reference};CrocBase.prototype.convertToPercentile=function(value,reference){if(typeof value==="string"){if(value.indexOf("px",value.length-2)!==-1){return(parseInt(value.substring(0,value.length-2))/reference*100).toFixed(2)+"%"}else if(value.indexOf("%",value.length-1)!==-1){return value}}else if(typeof value==="number"){return(value/reference*100).toFixed(2)+"%"}else if(value===null||value===undefined){return"0%"}return"0%"};function CrocButton(root,normal,hover,pressed){CrocBase.call(this,root);if(typeof normal==="string"){this.normal=new CrocImageSimple(root,normal)}else{this.normal=normal}if(typeof hover==="string"){this.hover=new CrocImageSimple(root,hover)}else{this.hover=hover}if(typeof pressed==="string"){this.pressed=new CrocImageSimple(root,pressed)}else{this.pressed=pressed}this.addChild(this.normal);this.addChild(this.hover);this.addChild(this.pressed);this.scaling="none";this.mode="normal";this.addEventListener("blur",function(e){this.setMode("normal");this.getRoot().setCursor();return false});this.addEventListener("pointermove",function(e){if(!this.hasFocus()){this.setMode("hover");this.getRoot().setCursor("pointer")}return false});this.addEventListener("pointerleave",function(e){if(!this.hasFocus()){this.setMode("normal");this.getRoot().setCursor()}return false});this.addEventListener("pointerdown",function(e){this.focus();this.setMode("pressed");this.getRoot().setCursor("pointer")});this.addEventListener("pointerup",function(e){this.blur();this.setMode("hover");this.getRoot().setCursor("pointer")})}CrocButton.prototype=Object.create(CrocBase.prototype);CrocButton.prototype.constructor=CrocButton;CrocButton.prototype.setMode=function(state){if(this.mode!==state){this.mode=state;this.getRoot().repaint()}};CrocButton.prototype.setScaling=function(scaling){this.normal.setScaling(scaling);this.hover.setScaling(scaling);this.pressed.setScaling(scaling)};CrocButton.prototype.setTargetWidth=function(width){this.normal.setTargetWidth(width);this.hover.setTargetWidth(width);this.pressed.setTargetWidth(width)};CrocButton.prototype.setTargetHeight=function(height){this.normal.setTargetHeight(height);this.hover.setTargetHeight(height);this.pressed.setTargetHeight(height)};CrocButton.prototype.getWidth=function(){switch(this.mode){case"normal":return this.normal.getWidth();break;case"hover":return this.hover.getWidth();break;case"pressed":return this.pressed.getWidth();break;default:return this.normal.getWidth();break}};CrocButton.prototype.getHeight=function(){switch(this.mode){case"normal":return this.normal.getHeight();break;case"hover":return this.hover.getHeight();break;case"pressed":return this.pressed.getHeight();break;default:return this.normal.getHeight();break}};CrocButton.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}context.save();switch(this.mode){case"normal":this.normal.paint(context,width,height);break;case"hover":this.hover.paint(context,width,height);break;case"pressed":this.pressed.paint(context,width,height);break;default:this.normal.paint(context,width,height);break}context.restore()};function CrocImageSimple(root,imgSrc){var currentCrocImageSimple=this;imgSrc=imgSrc||root.themer.getValue(arguments.callee,"image");CrocBase.call(this,root);this.currentImage=null;this.hitTestType="bounding";this.scaling="none";this.setImage(imgSrc)}CrocImageSimple.prototype=Object.create(CrocBase.prototype);CrocImageSimple.prototype.constructor=CrocImageSimple;CrocImageSimple.prototype.setImage=function(imgSrc){var currentCrocImageSimple=this;this.imgSrc=imgSrc;this.getRoot().loadImage(imgSrc,function(){currentCrocImageSimple.currentImage=currentCrocImageSimple.getRoot().getImage(currentCrocImageSimple.imgSrc);currentCrocImageSimple.getRoot().repaint()})};CrocImageSimple.prototype.setScaling=function(scaling){this.scaling=scaling||"none";return};CrocImageSimple.prototype.getWidth=function(){if(this.currentImage===null){return 0}if(this.scaling!=="none"){return this.currentWidth}return this.currentImage.width};CrocImageSimple.prototype.getHeight=function(){if(this.currentImage===null){return 0}if(this.scaling!=="none"){return this.currentHeight}return this.currentImage.height};CrocImageSimple.prototype.getImageWidth=function(){if(this.currentImage===null){return 0}return this.currentImage.width};CrocImageSimple.prototype.getImageHeight=function(){if(this.currentImage===null){return 0}return this.currentImage.height};CrocImageSimple.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}if(this.currentImage===null){this.currentImage=this.getRoot().getImage(this.imgSrc);if(this.currentImage===null){return}}context.save();if(this.scaling==="stretch"){var w=width/this.currentImage.width;var h=height/this.currentImage.height;this.currentWidth=width;this.currentHeight=height;context.scale(w,h)}else if(this.scaling==="target"){this.currentWidth=this.convertToPixels(this.targetWidth,width);this.currentHeight=this.convertToPixels(this.targetHeight,height);var w=0;var h=0;if(this.currentWidth!==0){w=this.currentWidth/this.currentImage.width}if(this.currentHeight!==0){h=this.currentHeight/this.currentImage.height}if(w>=0&&h>=0){context.scale(w,h)}}else if(this.scaling==="targetWidth"){this.currentWidth=this.convertToPixels(this.targetWidth,width);this.currentHeight=this.currentWidth*this.currentImage.height/this.currentImage.width;var w=0;var h=0;if(this.currentWidth!==0){w=this.currentWidth/this.currentImage.width}if(this.currentHeight!==0){h=this.currentHeight/this.currentImage.height}if(w>=0&&h>=0){context.scale(w,h)}}else{this.currentWidth=this.currentImage.width;this.currentHeight=this.currentImage.height}context.drawImage(this.currentImage,0,0);context.restore();return};function CrocToggle(root,off,on){CrocBase.call(this,root);off=off||root.themer.getValue(arguments.callee,"off");on=on||root.themer.getValue(arguments.callee,"on");this.value=false;this.offImage=new CrocImageSimple(root,off);this.onImage=new CrocImageSimple(root,on);this.addEventListener("pointermove",function(e){this.getRoot().setCursor("pointer");return false});this.addEventListener("pointerleave",function(e){if(!this.hasFocus()){this.setMode("normal")}this.getRoot().setCursor("");return false});this.addEventListener("pointerdown",function(e){this.focus();this.setValue(!this.getValue());this.event("valuechanged",this.getValue());this.setMode("focus")});this.addEventListener("pointerup",function(e){this.blur();this.setMode("hover")})}CrocToggle.prototype=Object.create(CrocBase.prototype);CrocToggle.prototype.constructor=CrocToggle;CrocToggle.prototype.getValue=function(){return this.value};CrocToggle.prototype.setMode=function(mode){};CrocToggle.prototype.setValue=function(value){this.value=value==true;this.getRoot().repaint()};CrocToggle.prototype.getWidth=function(){if(this.value){return this.onImage.getWidth()}return this.offImage.getWidth()};CrocToggle.prototype.getHeight=function(){if(this.value){return this.onImage.getHeight()}return this.offImage.getHeight()};CrocToggle.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}context.save();if(this.getValue()){this.onImage.paint(context,width,height)}else{this.offImage.paint(context,width,height)}context.restore();return};function CrocPanel(root){CrocBase.call(this,root);this.childrenOrientations={}}CrocPanel.prototype=Object.create(CrocBase.prototype);CrocPanel.prototype.constructor=CrocPanel;CrocPanel.prototype.addChild=function(uiObject,x,y,rotation,width,height){if(CrocBase.prototype.addChild.call(this,uiObject)===false){return false}x=x||0;y=y||0;width=width||1;height=height||1;rotation=rotation||0;this.childrenOrientations[uiObject.uuid]={x:x,y:y,width:width,height:height,rotation:rotation};this.getRoot().repaint();return true};CrocPanel.prototype.removeChild=function(uiObject){if(CrocBase.prototype.removeChild.call(this,uiObject)===false){return false}delete this.childrenOrientations[uiObject.uuid];this.getRoot().repaint();return true};CrocPanel.prototype.removeAllChildren=function(){CrocBase.prototype.removeAllChildren.call(this);this.childrenOrientations={};this.getRoot().repaint()};CrocPanel.prototype.setChildOrientation=function(uiObject,x,y,rotation,width,height){if(!(uiObject.uuid in this.childrenOrientations)){return false}x===undefined?x=this.childrenOrientations[uiObject.uuid].x:x;y===undefined?y=this.childrenOrientations[uiObject.uuid].y:y;width===undefined?width=this.childrenOrientations[uiObject.uuid].width:width;height===undefined?height=this.childrenOrientations[uiObject.uuid].height:height;rotation===undefined?rotation=this.childrenOrientations[uiObject.uuid].rotation:rotation;if(this.childrenOrientations[uiObject.uuid]===undefined||this.childrenOrientations[uiObject.uuid].x!==x||this.childrenOrientations[uiObject.uuid].y!==y||this.childrenOrientations[uiObject.uuid].width!==width||this.childrenOrientations[uiObject.uuid].height!==height||this.childrenOrientations[uiObject.uuid].rotation!==rotation){this.childrenOrientations[uiObject.uuid]={x:x,y:y,width:width,height:height,rotation:rotation};this.getRoot().repaint()}};CrocPanel.prototype.getChildOrientation=function(uiObject){if(!(uiObject.uuid in this.childrenOrientations)){return null}return this.childrenOrientations[uiObject.uuid]};CrocPanel.prototype.hitTest=function(context,x,y,width,height){var hitReturn=[];var hitObject=CrocBase.prototype.hitTest.call(this,context,x,y,width,height);if(hitObject!==null){hitReturn.push(hitObject)}context.save();context.beginPath();context.lineTo(width,0);context.lineTo(width,height);context.lineTo(0,height);context.lineTo(0,0);context.clip();for(var i=0;i<this.children.length;i++){context.save();var currentChild=this.children[i];var currentOrientation=this.childrenOrientations[currentChild.uuid];context.rotate(currentOrientation.rotation);context.scale(this.convertToPixels(currentOrientation.width,width),this.convertToPixels(currentOrientation.height,height));var newWidthHeight=this.transformPoint(context.getCurrentTransform(),this.getWidth(),this.getHeight());newWidthHeight=this.transformPoint(this.inverseTransform(this.getRoot().rootTransform),newWidthHeight.x,newWidthHeight.y);context.restore();context.save();context.translate(this.convertToPixels(currentOrientation.x,width),this.convertToPixels(currentOrientation.y,height));context.rotate(currentOrientation.rotation);context.scale(this.convertToPixels(currentOrientation.width,width),this.convertToPixels(currentOrientation.height,height));var newOriginPosition=this.transformPoint(context.getCurrentTransform(),0,0);newOriginPosition=this.transformPoint(this.inverseTransform(this.getRoot().rootTransform),newOriginPosition.x,newOriginPosition.y);hitObject=currentChild.hitTest(context,x,y,newWidthHeight.x-newOriginPosition.x,newWidthHeight.y-newOriginPosition.y);if(hitObject!==null){hitReturn.push(hitObject)}context.restore()}context.restore();return hitReturn};CrocPanel.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}context.save();context.beginPath();context.lineTo(this.getWidth(),0);context.lineTo(this.getWidth(),this.getHeight());context.lineTo(0,height);context.lineTo(0,0);context.clip();var i=this.children.length;while(i--){context.save();var currentChild=this.children[i];var currentOrientation=this.childrenOrientations[currentChild.uuid];context.rotate(currentOrientation.rotation);context.scale(currentOrientation.width,currentOrientation.height);var newWidthHeight=this.transformPoint(context.getCurrentTransform(),this.getWidth(),this.getHeight());newWidthHeight=this.transformPoint(this.inverseTransform(this.getRoot().rootTransform),newWidthHeight.x,newWidthHeight.y);context.restore();context.save();context.translate(this.convertToPixels(currentOrientation.x,this.getWidth()),this.convertToPixels(currentOrientation.y,this.getHeight()));context.rotate(currentOrientation.rotation);context.scale(currentOrientation.width,currentOrientation.height);var newOriginPosition=this.transformPoint(context.getCurrentTransform(),0,0);newOriginPosition=this.transformPoint(this.inverseTransform(this.getRoot().rootTransform),newOriginPosition.x,newOriginPosition.y);currentChild.paint(context,newWidthHeight.x-newOriginPosition.x,newWidthHeight.y-newOriginPosition.y);context.restore()}context.restore();return};function CrocPanelBorder(root,tl,t,tr,l,r,bl,b,br,bkg){CrocPanel.call(this,root);tr=tr||root.themer.getValue(arguments.callee,"tr");t=t||root.themer.getValue(arguments.callee,"t");tl=tl||root.themer.getValue(arguments.callee,"tl");l=l||root.themer.getValue(arguments.callee,"l");r=r||root.themer.getValue(arguments.callee,"r");bl=bl||root.themer.getValue(arguments.callee,"bl");b=b||root.themer.getValue(arguments.callee,"b");br=br||root.themer.getValue(arguments.callee,"br");bkg=bkg||root.themer.getValue(arguments.callee,"bkg");this.backgroundImage=new CrocImageSimple(root,bkg);this.topLeftImage=new CrocImageSimple(root,tl);this.topImage=new CrocImageSimple(root,t);this.topRightImage=new CrocImageSimple(root,tr);this.leftImage=new CrocImageSimple(root,l);this.rightImage=new CrocImageSimple(root,r);this.bottomLeftImage=new CrocImageSimple(root,bl);this.bottomImage=new CrocImageSimple(root,b);this.bottomRightImage=new CrocImageSimple(root,br);this.topLeftImage.setScaling("none");this.topImage.setScaling("target");this.topRightImage.setScaling("target");this.leftImage.setScaling("target");this.rightImage.setScaling("target");this.bottomLeftImage.setScaling("target");this.bottomImage.setScaling("target");this.bottomRightImage.setScaling("target");this.backgroundImage.setScaling("target")}CrocPanelBorder.prototype=Object.create(CrocPanel.prototype);CrocPanelBorder.prototype.constructor=CrocPanelBorder;CrocPanelBorder.prototype.hitTest=function(context,x,y,width,height){var hitReturn=[];var hitObject=CrocBase.prototype.hitTest.call(this,context,x,y,width,height);if(hitObject!==null){hitReturn.push(hitObject)}interiorWidth=this.width-this.topLeftImage.getWidth()-this.topLeftImage.getWidth();interiorHeight=this.height-this.topLeftImage.getHeight()-this.topLeftImage.getHeight();for(var i=0;i<this.children.length;i++){context.save();context.translate(this.topLeftImage.getWidth(),this.topLeftImage.getHeight());var currentChild=this.children[i];var currentOrientation=this.childrenOrientations[currentChild.uuid];context.translate(currentOrientation.x,currentOrientation.y);context.rotate(currentOrientation.rotation);context.scale(currentOrientation.width,currentOrientation.height);hitObject=currentChild.hitTest(context,x,y,interiorWidth,interiorHeight);if(hitObject!==null){hitReturn.push(hitObject)}context.restore()}return hitReturn};CrocPanelBorder.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}context.save();context.beginPath();context.lineTo(this.getWidth(),0);context.lineTo(this.getWidth(),this.getHeight());context.lineTo(0,this.getHeight());context.lineTo(0,0);context.clip();var interiorWidth=0;var interiorHeight=0;this.topLeftImage.paint(context,width,height);interiorWidth=this.width-this.topLeftImage.getWidth()-this.bottomRightImage.getWidth();interiorHeight=this.height-this.topLeftImage.getHeight()-this.bottomRightImage.getHeight();context.save();context.translate(this.topLeftImage.getWidth(),0);this.topImage.setTargetHeight(this.topLeftImage.getHeight());this.topImage.setTargetWidth(interiorWidth);this.topImage.paint(context,width,height);context.translate(interiorWidth,0);this.topRightImage.setTargetHeight(this.topLeftImage.getHeight());this.topRightImage.setTargetWidth(this.topLeftImage.getWidth());this.topRightImage.paint(context,width,height);context.restore();context.save();context.translate(0,this.topLeftImage.getHeight());this.leftImage.setTargetWidth(this.topLeftImage.getWidth());this.leftImage.setTargetHeight(interiorHeight);this.leftImage.paint(context,width,height);context.translate(this.topLeftImage.getWidth(),0);this.backgroundImage.setTargetWidth(interiorWidth);this.backgroundImage.setTargetHeight(interiorHeight);this.backgroundImage.paint(context,interiorWidth,interiorHeight);context.translate(interiorWidth,0);this.rightImage.setTargetWidth(this.topLeftImage.getWidth());this.rightImage.setTargetHeight(interiorHeight);this.rightImage.paint(context,width,height);context.restore();context.save();context.translate(0,this.topLeftImage.getHeight()+interiorHeight);this.bottomLeftImage.setTargetWidth(this.topLeftImage.getWidth());this.bottomLeftImage.setTargetHeight(this.topLeftImage.getHeight());this.bottomLeftImage.paint(context,width,height);context.translate(this.topLeftImage.getWidth(),0);this.bottomImage.setTargetWidth(interiorWidth);this.bottomImage.setTargetHeight(this.topLeftImage.getHeight());this.bottomImage.paint(context,width,height);context.translate(interiorWidth,0);this.bottomRightImage.setTargetWidth(this.topLeftImage.getWidth());this.bottomRightImage.setTargetHeight(this.topLeftImage.getHeight());this.bottomRightImage.paint(context,width,height);context.restore();context.restore();context.save();context.translate(this.topLeftImage.getWidth(),this.topLeftImage.getHeight());CrocPanel.prototype.paint.call(this,context,interiorWidth,interiorHeight);this.width=this.convertToPixels(this.targetWidth,width);this.height=this.convertToPixels(this.targetHeight,height);context.restore();return};function CrocPanelSplit(root,tr,t,tl,l,r,bl,b,br,bkg,trH,tH,tlH,lH,rH,blH,bH,brH,bkgH,trF,tF,tlF,lF,rF,blF,bF,brF,bkgF){var currentPanelSplit=this;CrocBase.call(this,root);tr=tr||root.themer.getValue(arguments.callee,"tr");t=t||root.themer.getValue(arguments.callee,"t");tl=tl||root.themer.getValue(arguments.callee,"tl");l=l||root.themer.getValue(arguments.callee,"l");r=r||root.themer.getValue(arguments.callee,"r");bl=bl||root.themer.getValue(arguments.callee,"bl");b=b||root.themer.getValue(arguments.callee,"b");br=br||root.themer.getValue(arguments.callee,"br");bkg=bkg||root.themer.getValue(arguments.callee,"bkg");trH=trH||root.themer.getValue(arguments.callee,"trH");tH=tH||root.themer.getValue(arguments.callee,"tH");tlH=tlH||root.themer.getValue(arguments.callee,"tlH");lH=lH||root.themer.getValue(arguments.callee,"lH");rH=rH||root.themer.getValue(arguments.callee,"rH");blH=blH||root.themer.getValue(arguments.callee,"blH");bH=bH||root.themer.getValue(arguments.callee,"bH");brH=brH||root.themer.getValue(arguments.callee,"brH");bkgH=bkgH||root.themer.getValue(arguments.callee,"bkgH");trF=trF||root.themer.getValue(arguments.callee,"trF");tF=tF||root.themer.getValue(arguments.callee,"tF");tlF=tlF||root.themer.getValue(arguments.callee,"tlF");lF=lF||root.themer.getValue(arguments.callee,"lF");rF=rF||root.themer.getValue(arguments.callee,"rF");blF=blF||root.themer.getValue(arguments.callee,"blF");bF=bF||root.themer.getValue(arguments.callee,"bF");brF=brF||root.themer.getValue(arguments.callee,"brF");bkgF=bkgF||root.themer.getValue(arguments.callee,"bkgF");this.gripper=new CrocPanelBorder(root,tl,t,tr,l,r,bl,b,br,bkg);this.gripperHover=new CrocPanelBorder(root,tlH,tH,trH,lH,rH,blH,bH,brH,bkgH);this.gripperFocused=new CrocPanelBorder(root,tlF,tF,trF,lF,rF,blF,bF,brF,bkgF);this.mode="normal";this.spacing="10px";this.orientation="verticle";this.splitSizeScaling="percentile";this.splitSize="50%";this.splitMinimumSize="0%";this.splitMaximumSize="100%";this.showGripper=true;this.addEventListener("pointermove",function(e){if(this.hasFocus()){this.globalPointToSplitSize(e.x,e.y);this.getRoot().setCursor("move");return false}this.setMode("normal");this.getRoot().setCursor("");return true});this.addEventListener("pointerup",function(e){return currentPanelSplit._gripperPointerUp(e)});this.gripper.addEventListener("pointermove",function(e){if(currentPanelSplit.showGripper)return currentPanelSplit._gripperPointerMove(e)});this.gripper.addEventListener("pointerleave",function(e){if(currentPanelSplit.showGripper)return currentPanelSplit._gripperPointerLeave(e)});this.gripper.addEventListener("pointerdown",function(e){if(currentPanelSplit.showGripper)return currentPanelSplit._gripperPointerDown(e)});this.gripper.addEventListener("pointerup",function(e){if(currentPanelSplit.showGripper)return currentPanelSplit._gripperPointerUp(e)})}CrocPanelSplit.prototype=Object.create(CrocBase.prototype);CrocPanelSplit.prototype.constructor=CrocPanelSplit;CrocPanelSplit.prototype._gripperPointerMove=function(e){if(!this.hasFocus()){this.setMode("hover");this.getRoot().setCursor("move")}return false};CrocPanelSplit.prototype._gripperPointerLeave=function(e){if(!this.hasFocus()){this.setMode("normal");this.getRoot().setCursor("")}return false};CrocPanelSplit.prototype._gripperPointerDown=function(e){this.focus();this.globalPointToSplitSize(e.x,e.y);this.event("grippermoved",null);this.getRoot().setGlobalPaintWarning(true);this.setMode("focus")};CrocPanelSplit.prototype._gripperPointerUp=function(e){if(!this.hasFocus()){return true}this.blur();this.getRoot().setGlobalPaintWarning(false);this.setMode("normal");this.getRoot().setCursor("");this.resizing=false;return false};CrocPanelSplit.prototype.setSpacing=function(spacing){if(spacing===undefined){spacing="10px"}this.spacing=spacing;this.getRoot().repaint()};CrocPanelSplit.prototype.setShowGripper=function(show){this.showGripper=show===true;this.getRoot().repaint()};CrocPanelSplit.prototype.setSplitMinimumSize=function(min){this.splitMinimumSize=min;this.setSplitSize(this.splitSize)};CrocPanelSplit.prototype.setSplitMaximumSize=function(max){this.splitMaximumSize=max;this.setSplitSize(this.splitSize)};CrocPanelSplit.prototype.setSplitSize=function(size){var realSize=0;var realMin=0;var realMax=0;if(this.orientation==="verticle"){realMin=this.convertToPixels(this.splitMinimumSize,this.getHeight());realMax=this.convertToPixels(this.splitMaximumSize,this.getHeight());realSize=this.convertToPixels(size,this.getHeight())}else{realMin=this.convertToPixels(this.splitMinimumSize,this.getWidth());realMax=this.convertToPixels(this.splitMaximumSize,this.getWidth());realSize=this.convertToPixels(size,this.getWidth())}if(realSize>realMax){size=realMax}if(realSize<realMin){size=realMin}this.splitSize=size;this.getRoot().repaint()};CrocPanelSplit.prototype.globalPointToSplitSize=function(x,y){if(this.orientation==="verticle"){if(this.splitSizeScaling==="absolute"){this.setSplitSize(y)}else{this.setSplitSize(this.convertToPercentile(y,this.getHeight()))}}else{if(this.splitSizeScaling==="absolute"){this.setSplitSize(x)}else{this.setSplitSize(this.convertToPercentile(x,this.getWidth()))}}this.getRoot().repaint()};CrocPanelSplit.prototype.setMode=function(mode){this.mode=mode;this.getRoot().repaint()};CrocPanelSplit.prototype.setOrientation=function(orientation){this.orientation=orientation||"verticle";this.getRoot().repaint()};CrocPanelSplit.prototype.addChild=function(uiObject){if(CrocBase.prototype.addChild.call(this,uiObject)===false){return false}this.getRoot().repaint();return true};CrocPanelSplit.prototype.removeChild=function(uiObject){if(CrocBase.prototype.removeChild.call(this,uiObject)===false){return false}this.getRoot().repaint();return true};CrocPanelSplit.prototype.removeAllChildren=function(){CrocBase.prototype.removeAllChildren.call(this);this.getRoot().repaint()};CrocPanelSplit.prototype.hitTest=function(context,x,y,width,height){context.save();var hitReturn=[];var hitObject=CrocBase.prototype.hitTest.call(this,context,x,y,width,height);if(hitObject!==null){hitReturn.push(hitObject)}var currentGripper=this.gripper;var gripperVisible=currentGripper.getVisible();currentGripper.setVisible(this.showGripper);if(this.orientation==="verticle"){var realSpacing=this.convertToPixels(this.spacing,this.height);var tlh=currentGripper.topLeftImage.getHeight();var topHeight=this.convertToPixels(this.splitSize,this.height);if(this.children.length>0){var topChild=this.children[0];hitObject=topChild.hitTest(context,x,y,this.width,topHeight-realSpacing);if(hitObject!==null){hitReturn.push(hitObject)}}if(this.showGripper){context.translate(0,topHeight+realSpacing/2-tlh*2);hitObject=currentGripper.hitTest(context,x,y,this.width,tlh*2);if(hitObject!==null){hitReturn.push(hitObject)}context.translate(0,realSpacing/2+tlh*2)}else{context.translate(0,topHeight+realSpacing)}if(this.children.length>1){var bottomChild=this.children[1];hitObject=bottomChild.hitTest(context,x,y,this.width,this.height-topHeight-realSpacing);if(hitObject!==null){hitReturn.push(hitObject)}}}else{var realSpacing=this.convertToPixels(this.spacing,this.width);var tlw=currentGripper.topLeftImage.getWidth();var leftWidth=this.convertToPixels(this.splitSize,this.width);if(this.children.length>0){var leftChild=this.children[0];hitObject=leftChild.hitTest(context,x,y,leftWidth-realSpacing,this.height);if(hitObject!==null){hitReturn.push(hitObject)}}if(this.showGripper){context.translate(leftWidth+realSpacing/2-tlw*2,0);hitObject=currentGripper.hitTest(context,x,y,tlw*2,this.height);if(hitObject!==null){hitReturn.push(hitObject)}context.translate(realSpacing/2+tlw*2,0)}else{context.translate(leftWidth+realSpacing,0)}if(this.children.length>1){var rightChild=this.children[1];hitObject=rightChild.hitTest(context,x,y,this.width-leftWidth-realSpacing,this.height);if(hitObject!==null){hitReturn.push(hitObject)}}}currentGripper.setVisible(gripperVisible);context.restore();return hitReturn};CrocPanelSplit.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}context.save();context.beginPath();context.lineTo(width,0);context.lineTo(width,height);context.lineTo(0,height);context.lineTo(0,0);context.clip();var currentGripper=this.gripper;switch(this.mode){case"normal":currentGripper=this.gripper;break;case"hover":currentGripper=this.gripperHover;break;case"focus":currentGripper=this.gripperFocused;break;default:break}if(this.orientation==="verticle"){var realSpacing=this.convertToPixels(this.spacing,this.height);var tlh=currentGripper.topLeftImage.getHeight();var topHeight=this.convertToPixels(this.splitSize,this.height);if(this.children.length>0){var topChild=this.children[0];topChild.paint(context,this.width,topHeight-realSpacing)}if(this.showGripper){context.translate(0,topHeight+realSpacing/2-tlh*2);currentGripper.paint(context,this.width,tlh*2);context.translate(0,realSpacing/2+tlh*2)}else{context.translate(0,topHeight+realSpacing)}if(this.children.length>1){var bottomChild=this.children[1];bottomChild.paint(context,this.width,this.height-topHeight-realSpacing)}}else{var realSpacing=this.convertToPixels(this.spacing,this.width);var tlw=currentGripper.topLeftImage.getWidth();var leftWidth=this.convertToPixels(this.splitSize,this.width);if(this.children.length>0){var leftChild=this.children[0];leftChild.paint(context,leftWidth-realSpacing,this.height)}if(this.showGripper){context.translate(leftWidth+realSpacing/2-tlw*2,0);currentGripper.paint(context,tlw*2,this.height);context.translate(realSpacing/2+tlw*2,0)}else{context.translate(leftWidth+realSpacing,0)}if(this.children.length>1){var rightChild=this.children[1];rightChild.paint(context,this.width-leftWidth-realSpacing,this.height)}}context.restore()};function CrocPanelList(root,spacing,orientation){CrocBase.call(this,root);spacing=spacing||root.themer.getValue(arguments.callee,"spacing");orientation=orientation||root.themer.getValue(arguments.callee,"orientation");this.spacing=spacing;this.orientation=orientation}CrocPanelList.prototype=Object.create(CrocBase.prototype);CrocPanelList.prototype.constructor=CrocPanelList;CrocPanelList.prototype.setSpacing=function(spacing){if(spacing===undefined){spacing="10px"}this.spacing=spacing;this.getRoot().repaint()};CrocPanelList.prototype.setOrientation=function(orientation){this.orientation=orientation||"verticle";this.getRoot().repaint()};CrocPanelList.prototype.addChild=function(uiObject){if(CrocBase.prototype.addChild.call(this,uiObject)===false){return false}this.getRoot().repaint();return true};CrocPanelList.prototype.removeChild=function(uiObject){if(CrocBase.prototype.removeChild.call(this,uiObject)===false){return false}return true};CrocPanelList.prototype.removeAllChildren=function(){CrocBase.prototype.removeAllChildren.call(this);this.getRoot().repaint()};CrocPanelList.prototype.hitTest=function(context,x,y,width,height){var hitReturn=[];var hitObject=CrocBase.prototype.hitTest.call(this,context,x,y,width,height);context.save();if(hitObject!==null){hitReturn.push(hitObject)}if(this.orientation==="verticle"){var realSpacing=this.convertToPixels(this.spacing,this.height);var childrenHeight=(this.height-(this.children.length-1)*realSpacing)/this.children.length;for(var i=0;i<this.children.length;i++){var currentChild=this.children[i];hitObject=currentChild.hitTest(context,x,y,this.width,childrenHeight);if(hitObject!==null){hitReturn.push(hitObject)}context.translate(0,childrenHeight+realSpacing)}}else{var realSpacing=this.convertToPixels(this.spacing,this.width);var childrenWidth=(this.width-(this.children.length-1)*realSpacing)/this.children.length;for(var i=0;i<this.children.length;i++){var currentChild=this.children[i];hitObject=currentChild.hitTest(context,x,y,childrenWidth,this.height);if(hitObject!==null){hitReturn.push(hitObject)}context.translate(childrenWidth+realSpacing,0)}}context.restore();return hitReturn};CrocPanelList.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);context.save();if(!this.visible){return}if(this.orientation==="verticle"){var realSpacing=this.convertToPixels(this.spacing,this.height);var childrenHeight=(this.height-(this.children.length-1)*realSpacing)/this.children.length;for(var i=0;i<this.children.length;i++){var currentChild=this.children[i];currentChild.paint(context,this.width,childrenHeight);context.translate(0,childrenHeight+realSpacing)}}else{var realSpacing=this.convertToPixels(this.spacing,this.width);var childrenWidth=(this.width-(this.children.length-1)*realSpacing)/this.children.length;for(var i=0;i<this.children.length;i++){var currentChild=this.children[i];currentChild.paint(context,childrenWidth,this.height);context.translate(childrenWidth+realSpacing,0)}}context.restore()};function CrocPanelScrollable(root,scrollArrow,scrollEndcap,scrollCenter,scrollArrowHover,scrollEndcapHover,scrollCenterHover,scrollArrowPressed,scrollEndcapPressed,scrollCenterPressed,tr,t,tl,l,r,bl,b,br,bkg){var currentPanelScrollable=this;CrocPanel.call(this,root);scrollArrow=scrollArrow||root.themer.getValue(arguments.callee,"scrollArrow");scrollEndcap=scrollEndcap||root.themer.getValue(arguments.callee,"scrollEndcap");scrollCenter=scrollCenter||root.themer.getValue(arguments.callee,"scrollCenter");scrollArrowHover=scrollArrowHover||root.themer.getValue(arguments.callee,"scrollArrowHover");scrollEndcapHover=scrollEndcapHover||root.themer.getValue(arguments.callee,"scrollEndcapHover");scrollCenterHover=scrollCenterHover||root.themer.getValue(arguments.callee,"scrollCenterHover");scrollArrowPressed=scrollArrowPressed||root.themer.getValue(arguments.callee,"scrollArrowPressed");scrollEndcapPressed=scrollEndcapPressed||root.themer.getValue(arguments.callee,"scrollEndcapPressed");scrollCenterPressed=scrollCenterPressed||root.themer.getValue(arguments.callee,"scrollCenterPressed");tr=tr||root.themer.getValue(arguments.callee,"tr");t=t||root.themer.getValue(arguments.callee,"t");tl=tl||root.themer.getValue(arguments.callee,"tl");l=l||root.themer.getValue(arguments.callee,"l");r=r||root.themer.getValue(arguments.callee,"r");bl=bl||root.themer.getValue(arguments.callee,"bl");b=b||root.themer.getValue(arguments.callee,"b");br=br||root.themer.getValue(arguments.callee,"br");bkg=bkg||root.themer.getValue(arguments.callee,"bkg");this.scrollArrowUp=new CrocButton(root,scrollArrow,scrollArrow,scrollArrow);this.scrollArrowDown=new CrocButton(root,scrollArrow,scrollArrow,scrollArrow);this.scrollEndcapUp=new CrocButton(root,scrollEndcap,scrollEndcap,scrollEndcap);this.scrollEndcapDown=new CrocButton(root,scrollEndcap,scrollEndcap,scrollEndcap);this.scrollCenterUpDown=new CrocButton(root,scrollCenter,scrollCenter,scrollCenter);this.scrollCenterUpDown.setScaling("stretch");this.scrollBorderUpDown=new CrocPanelBorder(root,tl,t,tr,l,r,bl,b,br,bkg);this.scrollArrowLeft=new CrocButton(root,scrollArrow,scrollArrow,scrollArrow);this.scrollArrowRight=new CrocButton(root,scrollArrow,scrollArrow,scrollArrow);this.scrollEndcapLeft=new CrocButton(root,scrollEndcap,scrollEndcap,scrollEndcap);this.scrollEndcapRight=new CrocButton(root,scrollEndcap,scrollEndcap,scrollEndcap);this.scrollCenterLeftRight=new CrocButton(root,scrollCenter,scrollCenter,scrollCenter);this.scrollCenterLeftRight.setScaling("stretch");this.scrollBorderLeftRight=new CrocPanelBorder(root,tl,t,tr,l,r,bl,b,br,bkg);this.addEventListener("scrollverticle",function(e){var realCurrentHeightPosition=this.convertToPixels(this.currentHeightPosition,this.getHeight());realCurrentHeightPosition=Math.round(realCurrentHeightPosition-e.delta);this.setCurrentHeightPosition(realCurrentHeightPosition);return true});this.addEventListener("scrollhorizontal",function(e){var realCurrentWidthPosition=this.convertToPixels(this.currentWidthPosition,this.getWidth());realCurrentWidthPosition=Math.round(realCurrentWidthPosition-e.delta);this.setCurrentWidthPosition(realCurrentWidthPosition);return true});this.scrollableAreaHeightMode="fixed";this.scrollableAreaWidthMode="fixed";this.scrollableAreaTargetHeight="1200px";this.scrollableAreaTargetWidth="4000px";this.currentWidthPosition="0px";this.currentHeightPosition="0px";this.autoHideWidthScroller=false;this.autoHideHeightScroller=false;this.mode="normal"}CrocPanelScrollable.prototype=Object.create(CrocPanel.prototype);CrocPanelScrollable.prototype.constructor=CrocPanelScrollable;CrocPanelScrollable.prototype.setScrollableAreaHeightMode=function(mode){this.scrollableAreaHeightMode=mode;this.getRoot().repaint()};CrocPanelScrollable.prototype.setScrollableAreaWidthMode=function(mode){this.scrollableAreaWidthMode=mode;this.getRoot().repaint()};CrocPanelScrollable.prototype.setScrollableAreaTargetWidth=function(targetWidth){this.scrollableAreaTargetWidth=targetWidth;this.getRoot().repaint()};CrocPanelScrollable.prototype.setScrollableAreaTargetHeight=function(targetHeight){this.scrollableAreaTargetHeight=targetHeight;this.getRoot().repaint()};CrocPanelScrollable.prototype.setCurrentWidthPosition=function(targetWidthPosition){this.currentWidthPosition=targetWidthPosition;this.getRoot().repaint()};CrocPanelScrollable.prototype.setCurrentHeightPosition=function(targetHeightPosition){this.currentHeightPosition=targetHeightPosition;this.getRoot().repaint()};CrocPanelScrollable.prototype.setAutoHideWidthScroller=function(autoHide){this.autoHideWidthScroller=autoHide===true;this.getRoot().repaint()};CrocPanelScrollable.prototype.setAutoHideHeightScroller=function(autoHide){this.setAutoHideHeightScroller=autoHide===true;this.getRoot().repaint()};CrocPanelScrollable.prototype.hitTest=function(context,x,y,width,height){var hitReturn=[];var hitObject=CrocBase.prototype.hitTest.call(this,context,x,y,width,height);if(hitObject!==null){hitReturn.push(hitObject)}var interiorClippingWidth=0;var interiorClippingHeight=0;var scrollableAreaWidth=0;var scrollableAreaHeight=0;var maxWidth=0;var maxHeight=0;var drawWidthScroller=!this.autoHideWidthScroller;var drawHeightScroller=!this.autoHideHeightScroller;var tlw=this.scrollBorderUpDown.topLeftImage.getWidth();var tlh=this.scrollBorderUpDown.topLeftImage.getHeight();var brw=this.scrollBorderUpDown.bottomRightImage.getWidth();var brh=this.scrollBorderUpDown.bottomLeftImage.getHeight();var scrollWidth=Math.max(this.scrollArrowUp.normal.getImageWidth(),this.scrollCenterUpDown.normal.getImageWidth(),this.scrollEndcapUp.normal.getImageWidth());var scrollCapHeight=this.scrollEndcapUp.getHeight();var scrollArrowUpHeight=this.scrollArrowUp.getHeight();interiorClippingWidth=this.getWidth()-(tlw+brw+scrollWidth);interiorClippingHeight=this.getHeight()-(tlw+brw+scrollWidth);if(this.scrollableAreaWidthMode==="auto"||this.scrollableAreaHeightMode==="auto"){}switch(this.scrollableAreaWidthMode){case"auto":scrollableAreaWidth=maxWidth;if(this.autoHideWidthScroller&&scrollableAreaWidth<=this.getWidth()){interiorClippingWidth=this.getWidth();drawWidthScroller=false}break;case"fixed":scrollableAreaWidth=this.convertToPixels(this.scrollableAreaTargetWidth,this.getWidth());if(this.autoHideWidthScroller&&scrollableAreaWidth<=this.getWidth()){interiorClippingWidth=this.getWidth();drawWidthScroller=false}break;default:if(this.autoHideWidthScroller){interiorClippingWidth=this.getWidth();drawWidthScroller=false}scrollableAreaWidth=interiorClippingWidth;break}switch(this.scrollableAreaHeightMode){case"auto":scrollableAreaHeight=maxHeight;if(this.autoHideHeightScroller&&scrollableAreaHeight<=this.getHeight()){interiorClippingHeight=this.getHeight();drawHeightScroller=false}break;case"fixed":scrollableAreaHeight=this.convertToPixels(this.scrollableAreaTargetHeight,this.getHeight());if(this.autoHideHeightScroller&&scrollableAreaHeight<=this.getHeight()){interiorClippingHeight=this.getHeight();drawHeightScroller=false}break;default:if(this.autoHideHeightScroller){interiorClippingHeight=this.getHeight();drawHeightScroller=false}scrollableAreaHeight=interiorClippingHeight;break}context.save();var currentScrollArrowUp=this.scrollArrowUp;var currentScrollArrowDown=this.scrollArrowDown;var currentScrollEndcapUp=this.scrollEndcapUp;var currentScrollEndcapDown=this.scrollEndcapDown;var currentScrollCenterUpDown=this.scrollCenterUpDown;var currentScrollArrowLeft=this.scrollArrowLeft;var currentScrollArrowRight=this.scrollArrowRight;var currentScrollEndcapLeft=this.scrollEndcapLeft;var currentScrollEndcapRight=this.scrollEndcapRight;var currentScrollCenterLeftRight=this.scrollCenterLeftRight;switch(this.mode){case"normal":break;case"hover":break;case"pressed":break;default:break}var realCurrentWidthPosition=this.convertToPixels(this.currentWidthPosition,scrollableAreaWidth);var realCurrentHeightPosition=this.convertToPixels(this.currentHeightPosition,scrollableAreaHeight);if(realCurrentWidthPosition<0){this.currentWidthPosition=0;realCurrentWidthPosition=0}else if(realCurrentWidthPosition>scrollableAreaWidth-interiorClippingWidth){this.currentWidthPosition=scrollableAreaWidth-interiorClippingWidth;realCurrentWidthPosition=scrollableAreaWidth-interiorClippingWidth}if(realCurrentHeightPosition<0){this.currentHeightPosition=0;realCurrentHeightPosition=0}else if(realCurrentHeightPosition>scrollableAreaHeight-interiorClippingHeight){this.currentHeightPosition=scrollableAreaHeight-interiorClippingHeight;realCurrentHeightPosition=scrollableAreaHeight-interiorClippingHeight}var scrollSpanStartLeftRight=realCurrentWidthPosition/scrollableAreaWidth*(interiorClippingWidth-scrollArrowUpHeight*2-tlh-brh);var scrollSpanEndLeftRight=Math.min(scrollSpanStartLeftRight+interiorClippingWidth/scrollableAreaWidth*(interiorClippingWidth-scrollArrowUpHeight*2-tlh-brh),interiorClippingWidth-scrollArrowUpHeight*2-tlh-brh);var scrollSpanStartUpDown=realCurrentHeightPosition/scrollableAreaHeight*(interiorClippingHeight-scrollArrowUpHeight*2-tlh-brh);var scrollSpanEndUpDown=Math.min(scrollSpanStartUpDown+interiorClippingHeight/scrollableAreaHeight*(interiorClippingHeight-scrollArrowUpHeight*2-tlh-brh),interiorClippingHeight-scrollArrowUpHeight*2-tlh-brh);if(drawHeightScroller){context.save();context.translate(interiorClippingWidth,0);var hitObject=this.scrollBorderUpDown.hitTest(context,x,y,tlw+brw+scrollWidth,interiorClippingHeight);if(hitObject!==null){hitReturn.push(hitObject)}var currentTransform=context.getCurrentTransform();context.translate(tlw,tlh+scrollArrowUpHeight);context.scale(1,-1);var hitObject=currentScrollArrowUp.hitTest(context,x,y,scrollWidth,interiorClippingHeight-tlh-brh);if(hitObject!==null){hitReturn.push(hitObject)}context.scale(1,-1);context.translate(0,scrollSpanStartUpDown);context.scale(1,-1);context.translate(0,-currentScrollEndcapUp.normal.getImageHeight());var hitObject=currentScrollEndcapUp.hitTest(context,x,y,scrollWidth,currentScrollEndcapUp.normal.getImageHeight());if(hitObject!==null){hitReturn.push(hitObject)}context.translate(0,currentScrollEndcapUp.normal.getImageHeight());context.scale(1,-1);context.translate(0,currentScrollEndcapUp.normal.getImageHeight());var hitObject=currentScrollCenterUpDown.hitTest(context,x,y,scrollWidth,scrollSpanEndUpDown-scrollSpanStartUpDown-currentScrollEndcapUp.normal.getImageHeight()*2);if(hitObject!==null){hitReturn.push(hitObject)}context.translate(0,scrollSpanEndUpDown-scrollSpanStartUpDown-currentScrollEndcapDown.normal.getImageHeight()*2);var hitObject=currentScrollEndcapDown.hitTest(context,x,y,scrollWidth,currentScrollEndcapDown.normal.getImageHeight());if(hitObject!==null){hitReturn.push(hitObject)}context.setTransform.apply(context,currentTransform);context.translate(tlw,interiorClippingHeight-scrollArrowUpHeight-brh);var hitObject=currentScrollArrowDown.hitTest(context,x,y,scrollWidth,scrollArrowUpHeight);if(hitObject!==null){hitReturn.push(hitObject)}context.restore()}if(drawWidthScroller){context.save();context.translate(0,interiorClippingHeight+tlh+brh+scrollWidth);context.rotate(3*Math.PI/2);var currentTransform=context.getCurrentTransform();var hitObject=this.scrollBorderLeftRight.hitTest(context,x,y,tlw+brw+scrollWidth,interiorClippingWidth);if(hitObject!==null){hitReturn.push(hitObject)}context.translate(tlw,tlh+scrollArrowUpHeight);context.scale(1,-1);var hitObject=currentScrollArrowLeft.hitTest(context,x,y,scrollWidth,interiorClippingWidth-tlh-brh);if(hitObject!==null){hitReturn.push(hitObject)}context.scale(1,-1);context.translate(0,scrollSpanStartLeftRight);context.scale(1,-1);context.translate(0,-currentScrollEndcapLeft.normal.getImageHeight());var hitObject=currentScrollEndcapLeft.hitTest(context,x,y,scrollWidth,currentScrollEndcapLeft.normal.getImageHeight());if(hitObject!==null){hitReturn.push(hitObject)}context.translate(0,currentScrollEndcapLeft.normal.getImageHeight());context.scale(1,-1);context.translate(0,currentScrollEndcapLeft.normal.getImageHeight());var hitObject=currentScrollCenterLeftRight.hitTest(context,x,y,scrollWidth,scrollSpanEndLeftRight-scrollSpanStartLeftRight-currentScrollEndcapLeft.normal.getImageHeight()*2);if(hitObject!==null){hitReturn.push(hitObject)}context.translate(0,scrollSpanEndLeftRight-scrollSpanStartLeftRight-currentScrollEndcapRight.normal.getImageHeight()*2);var hitObject=currentScrollEndcapRight.hitTest(context,x,y,scrollWidth,currentScrollEndcapRight.normal.getImageHeight());if(hitObject!==null){hitReturn.push(hitObject)}context.setTransform.apply(context,currentTransform);context.translate(tlw,interiorClippingWidth-scrollArrowUpHeight-brh);var hitObject=currentScrollArrowRight.hitTest(context,x,y,scrollWidth,scrollArrowUpHeight);if(hitObject!==null){hitReturn.push(hitObject)}context.restore()}context.translate(-1*realCurrentWidthPosition,-1*realCurrentHeightPosition);context.beginPath();context.lineTo(interiorClippingWidth,0);context.lineTo(interiorClippingWidth,interiorClippingHeight);context.lineTo(0,height);context.lineTo(0,0);context.clip();var hitObject=CrocPanel.prototype.hitTest.call(this,context,x,y,context,scrollableAreaWidth,scrollableAreaHeight);if(hitObject!==null){hitReturn.push(hitObject)}this.width=this.convertToPixels(this.targetWidth,width);this.height=this.convertToPixels(this.targetHeight,height);context.restore();return hitReturn};CrocPanelScrollable.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}var interiorClippingWidth=0;var interiorClippingHeight=0;var scrollableAreaWidth=0;var scrollableAreaHeight=0;var maxWidth=0;var maxHeight=0;var drawWidthScroller=!this.autoHideWidthScroller;var drawHeightScroller=!this.autoHideHeightScroller;var tlw=this.scrollBorderUpDown.topLeftImage.getWidth();var tlh=this.scrollBorderUpDown.topLeftImage.getHeight();var brw=this.scrollBorderUpDown.bottomRightImage.getWidth();var brh=this.scrollBorderUpDown.bottomLeftImage.getHeight();var scrollWidth=Math.max(this.scrollArrowUp.normal.getImageWidth(),this.scrollCenterUpDown.normal.getImageWidth(),this.scrollEndcapUp.normal.getImageWidth());var scrollCapHeight=this.scrollEndcapUp.getHeight();var scrollArrowUpHeight=this.scrollArrowUp.getHeight();interiorClippingWidth=this.getWidth()-(tlw+brw+scrollWidth);interiorClippingHeight=this.getHeight()-(tlw+brw+scrollWidth);if(this.scrollableAreaWidthMode==="auto"||this.scrollableAreaHeightMode==="auto"){}switch(this.scrollableAreaWidthMode){case"auto":scrollableAreaWidth=maxWidth;if(this.autoHideWidthScroller&&scrollableAreaWidth<=this.getWidth()){interiorClippingWidth=this.getWidth();drawWidthScroller=false}break;case"fixed":scrollableAreaWidth=this.convertToPixels(this.scrollableAreaTargetWidth,this.getWidth());if(this.autoHideWidthScroller&&scrollableAreaWidth<=this.getWidth()){interiorClippingWidth=this.getWidth();drawWidthScroller=false}break;default:if(this.autoHideWidthScroller){interiorClippingWidth=this.getWidth();drawWidthScroller=false}scrollableAreaWidth=interiorClippingWidth;break}switch(this.scrollableAreaHeightMode){case"auto":scrollableAreaHeight=maxHeight;if(this.autoHideHeightScroller&&scrollableAreaHeight<=this.getHeight()){interiorClippingHeight=this.getHeight();drawHeightScroller=false}break;case"fixed":scrollableAreaHeight=this.convertToPixels(this.scrollableAreaTargetHeight,this.getHeight());if(this.autoHideHeightScroller&&scrollableAreaHeight<=this.getHeight()){interiorClippingHeight=this.getHeight();drawHeightScroller=false}break;default:if(this.autoHideHeightScroller){interiorClippingHeight=this.getHeight();drawHeightScroller=false}scrollableAreaHeight=interiorClippingHeight;break}context.save();var currentScrollArrowUp=this.scrollArrowUp;var currentScrollArrowDown=this.scrollArrowDown;var currentScrollEndcapUp=this.scrollEndcapUp;var currentScrollEndcapDown=this.scrollEndcapDown;var currentScrollCenterUpDown=this.scrollCenterUpDown;var currentScrollArrowLeft=this.scrollArrowLeft;var currentScrollArrowRight=this.scrollArrowRight;var currentScrollEndcapLeft=this.scrollEndcapLeft;var currentScrollEndcapRight=this.scrollEndcapRight;var currentScrollCenterLeftRight=this.scrollCenterLeftRight;switch(this.mode){case"normal":break;case"hover":break;case"pressed":break;default:break}var realCurrentWidthPosition=this.convertToPixels(this.currentWidthPosition,scrollableAreaWidth);var realCurrentHeightPosition=this.convertToPixels(this.currentHeightPosition,scrollableAreaHeight);if(realCurrentWidthPosition<0){this.currentWidthPosition=0;realCurrentWidthPosition=0}else if(realCurrentWidthPosition>scrollableAreaWidth-interiorClippingWidth){this.currentWidthPosition=scrollableAreaWidth-interiorClippingWidth;realCurrentWidthPosition=scrollableAreaWidth-interiorClippingWidth}if(realCurrentHeightPosition<0){this.currentHeightPosition=0;realCurrentHeightPosition=0}else if(realCurrentHeightPosition>scrollableAreaHeight-interiorClippingHeight){this.currentHeightPosition=scrollableAreaHeight-interiorClippingHeight;realCurrentHeightPosition=scrollableAreaHeight-interiorClippingHeight}var scrollSpanStartLeftRight=realCurrentWidthPosition/scrollableAreaWidth*(interiorClippingWidth-scrollArrowUpHeight*2-tlh-brh);var scrollSpanEndLeftRight=Math.min(scrollSpanStartLeftRight+interiorClippingWidth/scrollableAreaWidth*(interiorClippingWidth-scrollArrowUpHeight*2-tlh-brh),interiorClippingWidth-scrollArrowUpHeight*2-tlh-brh);var scrollSpanStartUpDown=realCurrentHeightPosition/scrollableAreaHeight*(interiorClippingHeight-scrollArrowUpHeight*2-tlh-brh);var scrollSpanEndUpDown=Math.min(scrollSpanStartUpDown+interiorClippingHeight/scrollableAreaHeight*(interiorClippingHeight-scrollArrowUpHeight*2-tlh-brh),interiorClippingHeight-scrollArrowUpHeight*2-tlh-brh);context.save();context.translate(-1*realCurrentWidthPosition,-1*realCurrentHeightPosition);context.beginPath();context.lineTo(interiorClippingWidth,0);context.lineTo(interiorClippingWidth,interiorClippingHeight);context.lineTo(0,height);context.lineTo(0,0);context.clip();CrocPanel.prototype.paint.call(this,context,scrollableAreaWidth,scrollableAreaHeight);context.restore();this.width=this.convertToPixels(this.targetWidth,width);this.height=this.convertToPixels(this.targetHeight,height);if(drawHeightScroller){context.save();context.translate(interiorClippingWidth,0);this.scrollBorderUpDown.paint(context,tlw+brw+scrollWidth,interiorClippingHeight);var currentTransform=context.getCurrentTransform();context.translate(tlw,tlh+scrollArrowUpHeight);context.scale(1,-1);currentScrollArrowUp.paint(context,scrollWidth,interiorClippingHeight-tlh-brh);context.scale(1,-1);context.translate(0,scrollSpanStartUpDown);context.scale(1,-1);context.translate(0,-currentScrollEndcapUp.normal.getImageHeight());currentScrollEndcapUp.paint(context,scrollWidth,currentScrollEndcapUp.normal.getImageHeight());context.translate(0,currentScrollEndcapUp.normal.getImageHeight());context.scale(1,-1);context.translate(0,currentScrollEndcapUp.normal.getImageHeight());currentScrollCenterUpDown.paint(context,scrollWidth,scrollSpanEndUpDown-scrollSpanStartUpDown-currentScrollEndcapUp.normal.getImageHeight()*2);context.translate(0,scrollSpanEndUpDown-scrollSpanStartUpDown-currentScrollEndcapDown.normal.getImageHeight()*2);currentScrollEndcapDown.paint(context,scrollWidth,currentScrollEndcapDown.normal.getImageHeight());context.setTransform.apply(context,currentTransform);context.translate(tlw,interiorClippingHeight-scrollArrowUpHeight-brh);currentScrollArrowDown.paint(context,scrollWidth,scrollArrowUpHeight);context.restore()}if(drawWidthScroller){context.save();context.translate(0,interiorClippingHeight+tlh+brh+scrollWidth);context.rotate(3*Math.PI/2);var currentTransform=context.getCurrentTransform();this.scrollBorderLeftRight.paint(context,tlw+brw+scrollWidth,interiorClippingWidth);context.translate(tlw,tlh+scrollArrowUpHeight);context.scale(1,-1);currentScrollArrowLeft.paint(context,scrollWidth,interiorClippingWidth-tlh-brh);context.scale(1,-1);context.translate(0,scrollSpanStartLeftRight);context.scale(1,-1);context.translate(0,-currentScrollEndcapLeft.normal.getImageHeight());currentScrollEndcapLeft.paint(context,scrollWidth,currentScrollEndcapLeft.normal.getImageHeight());context.translate(0,currentScrollEndcapLeft.normal.getImageHeight());context.scale(1,-1);context.translate(0,currentScrollEndcapLeft.normal.getImageHeight());currentScrollCenterLeftRight.paint(context,scrollWidth,scrollSpanEndLeftRight-scrollSpanStartLeftRight-currentScrollEndcapLeft.normal.getImageHeight()*2);context.translate(0,scrollSpanEndLeftRight-scrollSpanStartLeftRight-currentScrollEndcapRight.normal.getImageHeight()*2);currentScrollEndcapRight.paint(context,scrollWidth,currentScrollEndcapRight.normal.getImageHeight());context.setTransform.apply(context,currentTransform);context.translate(tlw,interiorClippingWidth-scrollArrowUpHeight-brh);currentScrollArrowRight.paint(context,scrollWidth,scrollArrowUpHeight);context.restore()}context.restore();return};function CrocLabel(root,text,font,color){CrocBase.call(this,root);font=font||root.themer.getValue(arguments.callee,"font");color=color||root.themer.getValue(arguments.callee,"color");this.setText(text);this.setFont(font);this.setColor(color);this.textFontHeightPadding=null;this.textBaseline="alphabetic";this.targetWidth=null;this.wrapping="none";this.wrappingRegEx="";this.alignmentHorizontal="start";this.alignmentVerticle="start";this.hitTestType="bounding"}CrocLabel.prototype=Object.create(CrocBase.prototype);CrocLabel.prototype.constructor=CrocLabel;CrocLabel.prototype.setText=function(text){this.text=text||"";this.getRoot().repaint()};CrocLabel.prototype.setFont=function(font){this.textFont=font||"10px sans-serif";this.textHeight=determineFontHeight(this.textFont);this.getRoot().repaint();return};CrocLabel.prototype.setAlignment=function(horiz,vert){this.alignmentHorizontal=horiz||"start";this.alignmentVerticle=vert||"start";this.getRoot().repaint();return};CrocLabel.prototype.setWrapping=function(wrapping){this.wrapping=wrapping;this.getRoot().repaint()};CrocLabel.prototype.setColor=function(color){this.textColor=color||"black";this.getRoot().repaint()};CrocLabel.prototype.hitTest=function(context,x,y,width,height){return null};CrocLabel.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}context.save();var splittedText=[];var deviderText=[];switch(this.wrapping){case"none":splittedText.push(this.text);break;case"forced":splittedText=this.text.split("");break;case"word":splittedText=this.text.split(/\s+/g);deviderText=this.text.match(/\s+/g);break;default:splittedText.push(this.text);break}context.font=this.textFont;context.textBaseline=this.textBaseline;context.textAlign=this.alignmentHorizontal;context.fillStyle=this.textColor;var currentWidth=this.getWidth();var currentHeight=this.getHeight();var currentLine="";var currentLineNumber=0;var currentFontHeightPadding=this.textFontHeightPadding;var maxWidth=0;if(currentFontHeightPadding===null){currentFontHeightPadding=this.textHeight-2}for(var i=0;i<splittedText.length;i++){var currentDeviderText="";if(deviderText!==null&&deviderText[i]!==undefined){currentDeviderText=deviderText[i]}var testLine=currentLine+splittedText[i];context.save();context.setTransform(1,0,0,1,0,0);var testMetrics=context.measureText(testLine);context.restore();if(testMetrics.width>maxWidth){maxWidth=testMetrics.width}if(testMetrics.width>currentWidth&&i>0){var y=currentLineNumber*(this.textHeight+currentFontHeightPadding);var x=0;switch(this.alignmentHorizontal){case"center":x=currentWidth/2;break;case"end":x=currentWidth;break;case"right":x=currentWidth;break}context.fillText(currentLine,x,y+this.textHeight);currentLine=splittedText[i]+currentDeviderText;currentLineNumber++}else{currentLine=testLine+currentDeviderText}}var y=currentLineNumber*(this.textHeight+currentFontHeightPadding);var x=0;context.save();context.setTransform(1,0,0,1,0,0);var testMetrics=context.measureText(currentLine);context.restore();if(testMetrics.width>maxWidth){maxWidth=testMetrics.width}switch(this.alignmentHorizontal){case"center":x=currentWidth/2;break;case"end":x=currentWidth;break;case"right":x=currentWidth;break}switch(this.alignmentVerticle){case"center":y=y+this.getHeight()/2-currentFontHeightPadding;break;case"end":y=y+this.getHeight()-currentFontHeightPadding;break;case"right":y=y+this.getHeight()-currentFontHeightPadding;break}this.height=y+this.textHeight;context.fillText(currentLine,x,y+this.textHeight);context.restore();return};function CrocDOM(root,contents){CrocBase.call(this,root);this.domObject=null;this.contents=contents||"<div></div>";this.domObject=document.createElement("div");this.domObject.setAttribute("xmlns","http://www.w3.org/1999/xhtml");this.domObject.style.zIndex="-99";this.domObject.style.visibility="hidden";this.drawnOuterHTML="";this.domObject.innerHTML=this.contents;document.body.appendChild(this.domObject);this.drawDOM=true;this.updateContents();this.addEventListener("paintWarning",function(object){this.setDrawDOM(false);return false})}CrocDOM.prototype=Object.create(CrocBase.prototype);CrocDOM.prototype.constructor=CrocDOM;CrocDOM.prototype.updateContents=function(){var currentCrocDOM=this;this.drawnInnerHTML=this.domObject.innerHTML;var tempDomClone=this.domObject.cloneNode(true);tempDomClone.style.zIndex=100;tempDomClone.style.visibility="visible";tempDomClone.style.top="0px";tempDomClone.style.left="0px";var data="data:image/svg+xml,"+'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+this.getWidth().toString()+'px" height="'+this.getHeight().toString()+'px">'+"<g>"+'<foreignObject x="0" y="0" width="100%" height="100%">'+'<body xmlns="http://www.w3.org/1999/xhtml" style="margin: 0px; height: 100%;">'+tempDomClone.outerHTML+"</body>"+"</foreignObject>"+"</g>"+"</svg>";this.drawReady=false;this.drawImage=new Image;this.drawImage.onload=function(){currentCrocDOM.drawReady=true;currentCrocDOM.getRoot().repaint()};this.drawImage.onerror=function(err){currentCrocDOM.error("DOM Render failed with error!");currentCrocDOM.drawReady=false};this.drawImage.src=data};CrocDOM.prototype.setDrawDOM=function(drawDOM){this.drawDOM=drawDOM;this.getRoot().repaint()};CrocDOM.prototype.addPaintWarning=function(context){this.getRoot().addPaintWarning(this,context.getCurrentTransform(),this.getWidth(),this.getHeight())};CrocDOM.prototype.paint=function(context,width,height){var oldWidth=this.getWidth();var oldHeight=this.getHeight();CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){this.domObject.style.visibility="hidden";this.domObject.style.zIndex="-99";return}this.addPaintWarning(context);var position=this.transformPoint(context.getCurrentTransform(),0,0);this.domObject.style.position="absolute";this.domObject.style.top=position.y.toString()+"px";this.domObject.style.left=position.x.toString()+"px";this.domObject.style.width=this.getWidth().toString()+"px";this.domObject.style.height=this.getHeight().toString()+"px";this.domObject.style.overflow="hidden";if(oldWidth!==this.getWidth()||oldHeight!==this.getHeight()){this.updateContents()}else if(this.drawnInnerHTML!==this.domObject.innerHTML){this.updateContents()}if(this.drawDOM){this.domObject.style.visibility="visible";this.domObject.style.display="inline";this.domObject.style.zIndex=100}else{this.domObject.style.visibility="hidden";this.domObject.style.display="none";this.domObject.style.zIndex="-99";if(this.drawReady&&this.drawImage.width>0&&this.drawImage.height>0){context.drawImage(this.drawImage,0,0)}this.drawDOM=true}return};function CrocHTMLTextfield(root,value){var initialContent='<input type="text" value="'+value.toString()+'" style="border:none; background:transparent; font:18px Arial"></input>';CrocDOM.call(this,root,initialContent);var currentCrocDOM=this;this.domObject.childNodes[0].addEventListener("change",function(){currentCrocDOM.updateContents()});currentCrocDOM.updateContents()}CrocHTMLTextfield.prototype=Object.create(CrocDOM.prototype);CrocHTMLTextfield.prototype.constructor=CrocHTMLTextfield;CrocHTMLTextfield.prototype.setSize=function(size){this.domObject.childNodes[0].size=size;return};CrocHTMLTextfield.prototype.setColor=function(color){this.domObject.childNodes[0].style.color=color;return};CrocHTMLTextfield.prototype.setFont=function(font){this.domObject.childNodes[0].style.font=font;return};CrocHTMLTextfield.prototype.updateContents=function(){var currentCrocDOM=this;this.drawnInnerHTML=this.domObject.innerHTML;var data="data:image/svg+xml,"+'<svg xmlns="http://www.w3.org/2000/svg" width="'+this.domObject.childNodes[0].offsetWidth.toString()+'px" height="'+this.domObject.childNodes[0].offsetHeight.toString()+'px">'+'<foreignObject x="0" y="0" width="100%" height="100%">'+'<div xmlns="http://www.w3.org/1999/xhtml"> '+'<input type="text" size="'+this.domObject.childNodes[0].size.toString()+'" value="'+this.domObject.childNodes[0].value+'" style="border:none; background:transparent; color:'+this.domObject.childNodes[0].style.color+"; font:"+this.domObject.childNodes[0].style.font+'">'+"</input>"+"</div>"+"</foreignObject>"+"</svg>";this.drawReady=false;this.drawImage=new Image;this.drawImage.onload=function(){currentCrocDOM.drawReady=true;currentCrocDOM.getRoot().repaint()};this.drawImage.onerror=function(){currentCrocDOM.error("DOM Render failed with error!");currentCrocDOM.drawReady=false};this.drawImage.src=data};CrocHTMLTextfield.prototype.setValue=function(value){this.domObject.childNodes[0].value=value.toString();this.updateContents()};CrocHTMLTextfield.prototype.getValue=function(){return this.domObject.childNodes[0].value};CrocHTMLTextfield.prototype.addPaintWarning=function(context){this.getRoot().addPaintWarning(this,context.getCurrentTransform(),this.domObject.childNodes[0].offsetWidth,this.domObject.childNodes[0].offsetHeight)};CrocHTMLTextfield.prototype.paint=function(context,width,height){CrocDOM.prototype.paint.call(this,context,width,height);this.width=this.domObject.childNodes[0].offsetWidth;this.height=this.domObject.childNodes[0].offsetHeight;this.domObject.style.width=this.domObject.childNodes[0].offsetWidth.toString()+"px";this.domObject.style.height=this.domObject.childNodes[0].offsetHeight.toString()+"px"};function CrocTextfield(root,value){CrocBase.call(this,root);var currentTextfield=this;this.htmlTextfield=new CrocHTMLTextfield(root,value);this.htmlTextfield.domObject.childNodes[0].onfocus=function(e){currentTextfield.getRoot().setFocusedObject(currentTextfield);currentTextfield.setMode("focus");this.focus()};this.htmlTextfield.domObject.childNodes[0].onblur=function(e){currentTextfield.setMode("normal")};this.htmlTextfield.domObject.childNodes[0].onmouseover=function(e){currentTextfield.setMode("hover")};this.htmlTextfield.domObject.childNodes[0].onmouseleave=function(e){if(currentTextfield.mode!=="focus"){currentTextfield.setMode("normal")}};this.addEventListener("blur",function(e){return});this.mode="normal";this.border=new CrocPanelBorder(root,root.themer.getValue(arguments.callee,"tl"),root.themer.getValue(arguments.callee,"t"),root.themer.getValue(arguments.callee,"tr"),root.themer.getValue(arguments.callee,"l"),root.themer.getValue(arguments.callee,"r"),root.themer.getValue(arguments.callee,"bl"),root.themer.getValue(arguments.callee,"b"),root.themer.getValue(arguments.callee,"br"),root.themer.getValue(arguments.callee,"bkg"));this.borderFocus=new CrocPanelBorder(root,root.themer.getValue(arguments.callee,"tlF"),root.themer.getValue(arguments.callee,"tF"),root.themer.getValue(arguments.callee,"trF"),root.themer.getValue(arguments.callee,"lF"),root.themer.getValue(arguments.callee,"rF"),root.themer.getValue(arguments.callee,"blF"),root.themer.getValue(arguments.callee,"bF"),root.themer.getValue(arguments.callee,"brF"),root.themer.getValue(arguments.callee,"bkgF"));this.borderHover=new CrocPanelBorder(root,root.themer.getValue(arguments.callee,"tlH"),root.themer.getValue(arguments.callee,"tH"),root.themer.getValue(arguments.callee,"trH"),root.themer.getValue(arguments.callee,"lH"),root.themer.getValue(arguments.callee,"rH"),root.themer.getValue(arguments.callee,"blH"),root.themer.getValue(arguments.callee,"bH"),root.themer.getValue(arguments.callee,"brH"),root.themer.getValue(arguments.callee,"bkgH"));this.border.addChild(this.htmlTextfield)}CrocTextfield.prototype=Object.create(CrocBase.prototype);CrocTextfield.prototype.constructor=CrocTextfield;CrocTextfield.prototype.setSize=function(size){this.htmlTextfield.setSize(size);return};CrocTextfield.prototype.setColor=function(color){this.htmlTextfield.setColor(color);return};CrocTextfield.prototype.setFont=function(font){this.htmlTextfield.setFont(font);return};CrocTextfield.prototype.setValue=function(value){this.htmlTextfield.setValue(value);return};CrocTextfield.prototype.setMode=function(mode){this.mode=mode;this.getRoot().repaint()};CrocTextfield.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);var currentBorder=this.border;switch(this.mode){case"normal":currentBorder=this.border;break;case"hover":currentBorder=this.borderHover;break;case"focus":currentBorder=this.borderFocus;break;default:break}var tlw=currentBorder.topLeftImage.getWidth();var tlh=currentBorder.topLeftImage.getHeight();var brw=currentBorder.bottomRightImage.getWidth();var brh=currentBorder.bottomLeftImage.getHeight();currentBorder.paint(context,tlw+brw+this.htmlTextfield.getWidth(),tlh+brh+this.htmlTextfield.getHeight());return};function CrocSlider(root,slider,hover,focus,tr,t,tl,l,r,bl,b,br,bkg){CrocBase.call(this,root);tr=tr||root.themer.getValue(arguments.callee,"tr");t=t||root.themer.getValue(arguments.callee,"t");tl=tl||root.themer.getValue(arguments.callee,"tl");l=l||root.themer.getValue(arguments.callee,"l");r=r||root.themer.getValue(arguments.callee,"r");bl=bl||root.themer.getValue(arguments.callee,"bl");b=b||root.themer.getValue(arguments.callee,"b");br=br||root.themer.getValue(arguments.callee,"br");bkg=bkg||root.themer.getValue(arguments.callee,"bkg");slider=slider||root.themer.getValue(arguments.callee,"slider");hover=hover||root.themer.getValue(arguments.callee,"hover");focus=focus||root.themer.getValue(arguments.callee,"focus");this.mode="normal";this.orientation="horizontal";this.value=0;this.maxValue=100;this.minValue=0;this.stepping=1;this.groove=new CrocPanelBorder(root,tl,t,tr,l,r,bl,b,br,bkg);this.slider=new CrocImageSimple(root,slider);this.slider.setScaling("none");this.sliderHover=new CrocImageSimple(root,hover);this.sliderHover.setScaling("none");this.sliderFocus=new CrocImageSimple(root,focus);this.sliderFocus.setScaling("none");this.addEventListener("pointermove",function(e){if(!this.hasFocus()){this.setMode("hover");this.getRoot().setCursor("pointer")}else{this.localPointToValue(e.local.x,e.local.y);this.getRoot().setCursor("pointer");this.event("valuechanged",this.getValue())}return false});this.addEventListener("pointerleave",function(e){if(!this.hasFocus()){this.setMode("normal")}this.getRoot().setCursor("");return false});this.addEventListener("pointerdown",function(e){this.focus();this.localPointToValue(e.local.x,e.local.y);this.event("valuechanged",this.getValue());this.setMode("focus")});this.addEventListener("pointerup",function(e){this.blur();this.setMode("hover")});this.addEventListener("pointerout",function(e){this.blur();this.setMode("normal");this.getRoot().setCursor("")})}CrocSlider.prototype=Object.create(CrocBase.prototype);CrocSlider.prototype.constructor=CrocSlider;CrocSlider.prototype.getValue=function(){return this.value};CrocSlider.prototype.setSize=function(size){this.htmlTextfield.setSize(size);return};CrocSlider.prototype.setColor=function(color){this.htmlTextfield.setColor(color);return};CrocSlider.prototype.setFont=function(font){this.htmlTextfield.setFont(font);return};CrocSlider.prototype.setMode=function(mode){this.mode=mode;this.getRoot().repaint()};CrocSlider.prototype.setValue=function(value){if(value<this.minValue){value=this.minValue}if(value>this.maxValue){value=this.maxValue}this.value=Math.round(value/this.stepping)*this.stepping;this.getRoot().repaint()};CrocSlider.prototype.setStepping=function(stepping){this.stepping=stepping;this.setValue(this.value)};CrocSlider.prototype.setMaxValue=function(maxValue){this.maxValue=maxValue;this.setValue(this.value)};CrocSlider.prototype.setMinValue=function(minValue){this.minValue=minValue;this.setValue(this.value)};CrocSlider.prototype.getWidth=function(){if(this.orientation==="verticle"){return this.slider.getWidth()}else{return this.width}};CrocSlider.prototype.getHeight=function(){if(this.orientation==="verticle"){return this.height}else{return this.slider.getHeight()}};CrocSlider.prototype.setOrientation=function(orientation){if(orientation.toLowerCase()==="verticle"){this.orientation=orientation}else{this.orientation="horizontal"}this.getRoot().repaint()};CrocSlider.prototype.localPointToValue=function(x,y){var c={x:x,y:y};if(this.orientation==="verticle"){var value=(c.y-this.slider.getHeight()/2)*(this.maxValue-this.minValue)/(this.getHeight()-this.slider.getHeight());this.setValue(value)}else{var value=(c.x-this.slider.getWidth()/2)*(this.maxValue-this.minValue)/(this.getWidth()-this.slider.getWidth());this.setValue(value)}};CrocSlider.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);context.save();var parentTransform=context.getCurrentTransform();var currentGroove=this.groove;var currentSlider=this.slider;switch(this.mode){case"normal":currentGroove=this.groove;currentSlider=this.slider;break;case"hover":currentGroove=this.groove;currentSlider=this.sliderHover;break;case"focus":currentGroove=this.groove;currentSlider=this.sliderFocus;break;default:break}var tlw=currentGroove.topLeftImage.getWidth();var tlh=currentGroove.topLeftImage.getHeight();var brw=currentGroove.bottomRightImage.getWidth();var brh=currentGroove.bottomLeftImage.getHeight();if(this.orientation==="verticle"){context.save();context.translate(currentSlider.getWidth()/2-(tlw+brw)/2,currentSlider.getHeight()/2);currentGroove.paint(context,tlw+brw,this.getHeight()-currentSlider.getHeight());context.restore();var y=(this.getHeight()-currentSlider.getHeight())*(this.value-this.minValue)/(this.maxValue-this.minValue);context.translate(0,y);currentSlider.paint(context)}else{context.save();context.translate(currentSlider.getWidth()/2,currentSlider.getHeight()/2-(tlh+brh)/2);currentGroove.paint(context,this.getWidth()-currentSlider.getWidth(),tlh+brh);context.restore();var x=(this.getWidth()-currentSlider.getWidth())*(this.value-this.minValue)/(this.maxValue-this.minValue);context.translate(x,0);currentSlider.paint(context)}context.restore();return};function CrocAnalogMeter(root,value,backgroundImagePath,needleImagePath){CrocBase.call(this,root);backgroundImagePath=backgroundImagePath||root.themer.getValue(arguments.callee,"backgroundImage");needleImagePath=needleImagePath||root.themer.getValue(arguments.callee,"needleImage");this.value=value||0;this.valueLabelPostfix="";this.valueLabelPrefix="";this.valueLabelScale=1;this.valueLabelToFixed=0;this.minValue=0;this.maxValue=100;this.background=new CrocImageSimple(root,backgroundImagePath);this.background.setScaling("none");this.needle=new CrocImageSimple(root,needleImagePath);this.needle.setScaling("none");this.valueLabel=new CrocLabel(root,this.value.toString(),root.themer.getValue(arguments.callee,"valueLabelFont"),root.themer.getValue(arguments.callee,"valueLabelFontColor"));this.valueLabel.setAlignment("right")}CrocAnalogMeter.prototype=Object.create(CrocBase.prototype);CrocAnalogMeter.prototype.constructor=CrocAnalogMeter;CrocAnalogMeter.prototype.setValue=function(value){if(value<this.minValue){value=this.minValue}if(value>this.maxValue){value=this.maxValue}this.value=value;this.getRoot().repaint()};CrocAnalogMeter.prototype.setValueLabelPostfix=function(valueLabelPostfix){this.valueLabelPostfix=valueLabelPostfix.toString()};CrocAnalogMeter.prototype.setValueLabelPrefix=function(valueLabelPrefix){this.valueLabelPrefix=valueLabelPrefix.toString()};CrocAnalogMeter.prototype.setValueLabelScale=function(valueLabelScale){this.valueLabelScale=Number(valueLabelScale)};CrocAnalogMeter.prototype.setValueLabelToFixed=function(valueLabelToFixed){this.valueLabelToFixed=Number(valueLabelToFixed)};CrocAnalogMeter.prototype.setMaxValue=function(maxValue){this.maxValue=maxValue;this.setValue(this.value)};CrocAnalogMeter.prototype.setMinValue=function(minValue){this.minValue=minValue;this.setValue(this.value)};CrocAnalogMeter.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);context.save();this.background.paint(context,width,height);context.save();context.translate(-14,92);this.valueLabel.text=this.valueLabelPrefix+(this.value*this.valueLabelScale).toFixed(this.valueLabelToFixed)+this.valueLabelPostfix;this.valueLabel.paint(context,this.background.getWidth(),this.background.getHeight());context.restore();var needleCenter=this.background.getHeight()/1.6125;var backPadding=this.needle.getHeight()/32;var needlePadding=this.needle.getHeight()/1.33333333333333;var basePadding=this.needle.getHeight()-backPadding-needlePadding;var rad=Math.PI*(this.value-this.minValue)/(this.maxValue-this.minValue);context.translate(this.background.getWidth()/2,needleCenter);context.rotate(Math.PI/2+rad);context.translate(-(this.needle.getWidth()/2),-backPadding-basePadding/2);this.getRoot().setSmooth(true);this.needle.paint(context,width,height);this.getRoot().setSmooth(false);this.width=this.background.getWidth();this.height=this.background.getHeight();context.restore();return};function CrocProgressBar(root,value){CrocBase.call(this,root);this.value=value||0;this.minValue=0;this.maxValue=100;this.showLabel=false;this.border=new CrocPanelBorder(root,root.themer.getValue(arguments.callee,"tl"),root.themer.getValue(arguments.callee,"t"),root.themer.getValue(arguments.callee,"tr"),root.themer.getValue(arguments.callee,"l"),root.themer.getValue(arguments.callee,"r"),root.themer.getValue(arguments.callee,"bl"),root.themer.getValue(arguments.callee,"b"),root.themer.getValue(arguments.callee,"br"),root.themer.getValue(arguments.callee,"bkg"));this.label=new CrocLabel(root,this.value.toString(),"22px Arial");this.center=new CrocImageSimple(root,root.themer.getValue(arguments.callee,"progressCenter"));this.center.setScaling("target");this.left=new CrocImageSimple(root,root.themer.getValue(arguments.callee,"progressLeft"));this.left.setScaling("none");this.right=new CrocImageSimple(root,root.themer.getValue(arguments.callee,"progressRight"));this.right.setScaling("none");this.border.addChild(this.label);this.border.addChild(this.center);this.border.addChild(this.left);this.border.addChild(this.right);this.border.setTargetHeight("100%");this.border.setTargetWidth("100%")}CrocProgressBar.prototype=Object.create(CrocBase.prototype);CrocProgressBar.prototype.constructor=CrocProgressBar;CrocProgressBar.prototype.setMaxValue=function(maxValue){this.maxValue=maxValue;this.setValue(this.value)};CrocProgressBar.prototype.setMinValue=function(minValue){this.minValue=minValue;this.setValue(this.value)};CrocProgressBar.prototype.setValue=function(value){if(value<this.minValue){value=this.minValue}if(value>this.maxValue){value=this.maxValue}this.value=value;this.label.setText(this.value.toString());this.getRoot().repaint()};CrocProgressBar.prototype.setShowLabel=function(value){this.showLabel=value;this.getRoot().repaint()};CrocProgressBar.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}var currentBorder=this.border;var lh=this.left.getHeight();this.center.setTargetHeight(this.left.getHeight());interiorWidth=currentBorder.topImage.getWidth();var currentWidth=interiorWidth*((this.value-this.minValue)/(this.maxValue-this.minValue))-(this.left.getWidth()+this.right.getWidth());if(currentWidth<=0){this.center.setVisible(false);currentWidth=0}else{this.center.setVisible(true);this.center.setTargetWidth(currentWidth)}var tlh=currentBorder.topLeftImage.getHeight();var brh=currentBorder.bottomLeftImage.getHeight();var currentHeight=tlh+brh+this.left.getHeight();currentBorder.setChildOrientation(this.left,0,0);currentBorder.setChildOrientation(this.center,this.left.getWidth(),0);currentBorder.setChildOrientation(this.right,currentWidth+this.left.getWidth(),0);currentBorder.setChildOrientation(this.label,interiorWidth/2-this.label.getWidth()/2,currentHeight/2-this.label.getHeight());this.label.setVisible(this.showLabel);this.height=currentHeight;currentBorder.paint(context,this.getWidth(),this.getHeight());return};function CrocButtonLabeled(root,text,tr,t,tl,l,r,bl,b,br,bkg,trH,tH,tlH,lH,rH,blH,bH,brH,bkgH,trF,tF,tlF,lF,rF,blF,bF,brF,bkgF){var currentTextfield=this;this.label=new CrocLabel(root,text);tr=tr||root.themer.getValue(arguments.callee,"tr");t=t||root.themer.getValue(arguments.callee,"t");tl=tl||root.themer.getValue(arguments.callee,"tl");l=l||root.themer.getValue(arguments.callee,"l");r=r||root.themer.getValue(arguments.callee,"r");bl=bl||root.themer.getValue(arguments.callee,"bl");b=b||root.themer.getValue(arguments.callee,"b");br=br||root.themer.getValue(arguments.callee,"br");bkg=bkg||root.themer.getValue(arguments.callee,"bkg");trH=trH||root.themer.getValue(arguments.callee,"trH");tH=tH||root.themer.getValue(arguments.callee,"tH");tlH=tlH||root.themer.getValue(arguments.callee,"tlH");lH=lH||root.themer.getValue(arguments.callee,"lH");rH=rH||root.themer.getValue(arguments.callee,"rH");blH=blH||root.themer.getValue(arguments.callee,"blH");bH=bH||root.themer.getValue(arguments.callee,"bH");brH=brH||root.themer.getValue(arguments.callee,"brH");bkgH=bkgH||root.themer.getValue(arguments.callee,"bkgH");trF=trF||root.themer.getValue(arguments.callee,"trF");tF=tF||root.themer.getValue(arguments.callee,"tF");tlF=tlF||root.themer.getValue(arguments.callee,"tlF");lF=lF||root.themer.getValue(arguments.callee,"lF");rF=rF||root.themer.getValue(arguments.callee,"rF");blF=blF||root.themer.getValue(arguments.callee,"blF");bF=bF||root.themer.getValue(arguments.callee,"bF");brF=brF||root.themer.getValue(arguments.callee,"brF");bkgF=bkgF||root.themer.getValue(arguments.callee,"bkgF");this.mode="normal";this.border=new CrocPanelBorder(root,tl,t,tr,l,r,bl,b,br,bkg);this.borderPressed=new CrocPanelBorder(root,tlF,tF,trF,lF,rF,blF,bF,brF,bkgF);this.borderHover=new CrocPanelBorder(root,tlH,tH,trH,lH,rH,blH,bH,brH,bkgH);CrocButton.call(this,root,this.border,this.borderHover,this.borderPressed);this.label.setAlignment("center","center");this.label.setWrapping("word");this.label.setTargetWidth("100%");this.label.setTargetHeight("100%");this.border.addChild(this.label);this.border.setChildOrientation(this.label,0,0,0,"100%","100%");this.borderPressed.addChild(this.label);this.borderHover.addChild(this.label)}CrocButtonLabeled.prototype=Object.create(CrocButton.prototype);CrocButtonLabeled.prototype.constructor=CrocButtonLabeled;CrocButtonLabeled.prototype.getLabel=function(){return this.label};function CrocGraph(root){CrocBase.call(this,root);this.dataSets={test:{points:{1:2,3:5,4:2,12:4,2:1},label:"Test Data",labelColor:"green",labelFont:"24px Arial",labelFontHeight:determineFontHeight("24px Arial"),labelFontPadding:4,units:"test",lineColor:"pink",lineStyle:"solid",lineWidth:2,pointColor:"green",pointStyle:"square",pointWidth:10},other:{points:{1:6,3:8,4:12,12:14,2:6},label:"Test Data",labelColor:"green",labelFont:"24px Arial",labelFontHeight:determineFontHeight("24px Arial"),labelFontPadding:4,units:"test",lineColor:"blue",lineStyle:"solid",lineWidth:2,pointColor:"orange",pointStyle:"triangle",pointWidth:10},again:{points:{1:12,3:10,4:2,12:4,2:18,7:18,9:18,10:18,11:18,13:18,14:17,15:18,16:18,17:18,18:18,19:18},label:"Test Data",labelColor:"green",labelFont:"24px Arial",labelFontHeight:determineFontHeight("24px Arial"),labelFontPadding:4,units:"test",lineColor:"red",lineStyle:"solid",lineWidth:2,pointColor:"blue",pointStyle:"circle",pointWidth:10}};this.xAxisUnits="default";this.yAxisPadding="20px";this.unitTypes={default:{label:"",labelColor:"#444444",lineColor:"#888888",lineWidth:2,minValue:0,maxValue:30,majorStep:10,minorStep:2,majorLineColor:"#444444",minorLineColor:"#CC0000",majorLineStyle:"solid",minorLineStyle:"solid",majorLineWidth:2,minorLineWidth:1,majorLineLength:10,minorLineLength:4,majorLabelShow:true,minorLabelShow:true,majorLabelColor:"#444444",minorLabelColor:"#444444",majorLabelFont:"24px Arial",majorLabelFontHeight:determineFontHeight("24px Arial"),majorLabelFontPadding:4,minorLabelFont:"18px Arial",minorLabelFontHeight:determineFontHeight("18px Arial"),minorLabelFontPadding:4,labelFormat:function(value){if(value===undefined){return"undefined"}return value.toString()},majorBackgroundLineColor:"#0000CC",minorBackgroundLineColor:"#CC0000",majorBackgroundLineWidth:2,minorBackgroundLineWidth:1,majorBackgroundLineStyle:"solid",minorBackgroundLineStyle:"none"},test:{label:"",labelColor:"#444444",lineColor:"#888888",lineWidth:2,minValue:-20,maxValue:20,majorStep:10,minorStep:5,majorLineColor:"#444444",minorLineColor:"#0000CC",majorLineStyle:"solid",minorLineStyle:"solid",majorLineWidth:2,minorLineWidth:1,majorLineLength:10,minorLineLength:4,majorLabelShow:true,minorLabelShow:false,majorLabelColor:"#444444",minorLabelColor:"#444444",majorLabelFont:"18px Arial",majorLabelFontHeight:determineFontHeight("24px Arial"),majorLabelFontPadding:4,minorLabelFont:"10px Arial",minorLabelFontHeight:determineFontHeight("18px Arial"),minorLabelFontPadding:4,labelFormat:function(value){if(value===undefined){return"undefined"}return value.toString()},majorBackgroundLineColor:"#0000CC",minorBackgroundLineColor:"#CC0000",majorBackgroundLineWidth:2,minorBackgroundLineWidth:1,majorBackgroundLineStyle:"solid",minorBackgroundLineStyle:"none"}};this.labelPainter=new CrocLabel(root)}CrocGraph.prototype=Object.create(CrocBase.prototype);CrocGraph.prototype.constructor=CrocGraph;CrocGraph.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);var currentXAxisUnits=this.unitTypes[this.xAxisUnits];var currentXAxisDrawHeight=this.convertToPixels(currentXAxisUnits.lineWidth,this.getHeight())+Math.max(this.convertToPixels(currentXAxisUnits.majorLineLength,this.getHeight()),this.convertToPixels(currentXAxisUnits.minorLineLength,this.getHeight()))+currentXAxisUnits.majorLabelFontHeight+currentXAxisUnits.minorLabelFontPadding;var currentRightYAxisWidth=0;var currentLeftYAxisWidth=0;var currentYAxisNumber=0;var currentYAxisPadding=this.convertToPixels(this.yAxisPadding,this.getWidth());for(var k in this.unitTypes){if(k!==this.xAxisUnits){var currentYAxisUnits=this.unitTypes[k];var currentYAxisDrawWidth=this.convertToPixels(currentYAxisUnits.lineWidth,this.getWidth())+Math.max(this.convertToPixels(currentYAxisUnits.majorLineLength,this.getWidth()),this.convertToPixels(currentYAxisUnits.minorLineLength,this.getWidth()))+currentYAxisUnits.majorLabelFontHeight+currentYAxisUnits.minorLabelFontPadding;if(currentYAxisNumber%2===0){currentLeftYAxisWidth+=currentYAxisDrawWidth;if(currentYAxisNumber>1){currentLeftYAxisWidth+=currentYAxisPadding}}else{currentRightYAxisWidth+=currentYAxisDrawWidth;if(currentYAxisNumber>1){currentRightYAxisWidth+=currentYAxisPadding}}}}var currentInteriorWidth=this.getWidth()-currentRightYAxisWidth-currentLeftYAxisWidth;var currentInteriorHeight=this.getHeight()-currentXAxisDrawHeight;context.beginPath();context.lineWidth=this.convertToPixels(currentXAxisUnits.lineWidth,this.getHeight());context.strokeStyle=currentXAxisUnits.lineColor;context.moveTo(currentLeftYAxisWidth,currentInteriorHeight-currentXAxisUnits.lineWidth/2);context.lineTo(currentLeftYAxisWidth+currentInteriorWidth,currentInteriorHeight-currentXAxisUnits.lineWidth/2);context.stroke();var numberOfMinorLines=(currentXAxisUnits.maxValue-currentXAxisUnits.minValue)/currentXAxisUnits.minorStep;var minorLineDistance=currentInteriorWidth/(currentXAxisUnits.maxValue-currentXAxisUnits.minValue)*currentXAxisUnits.minorStep;var currentMinorLineXPos=currentLeftYAxisWidth+currentXAxisUnits.minorLineWidth/2;var minorLineLength=this.convertToPixels(currentXAxisUnits.minorLineLength,this.getHeight());context.lineWidth=this.convertToPixels(currentXAxisUnits.minorLineWidth,this.getWidth());context.strokeStyle=currentXAxisUnits.minorLineColor;this.labelPainter.alignmentHorizontal="left";switch(currentXAxisUnits.minorLineStyle){case"solid":for(var i=0;i<numberOfMinorLines;i++){if((i*currentXAxisUnits.minorStep-currentXAxisUnits.minValue)%currentXAxisUnits.majorStep!==0){context.beginPath();context.moveTo(currentMinorLineXPos,currentInteriorHeight);context.lineTo(currentMinorLineXPos,currentInteriorHeight+minorLineLength);context.stroke();if(currentXAxisUnits.minorLabelShow){this.labelPainter.color=currentXAxisUnits.minorLabelColor;this.labelPainter.textFont=currentXAxisUnits.minorLabelFont;this.labelPainter.text=currentXAxisUnits.labelFormat(i*currentXAxisUnits.minorStep+currentXAxisUnits.minValue);context.save();context.translate(currentMinorLineXPos,currentInteriorHeight+minorLineLength+currentXAxisUnits.minorLabelFontPadding);this.labelPainter.paint(context,this.getWidth(),this.getHeight);context.restore()}if(currentXAxisUnits.minorBackgroundLineStyle==="solid"){}}currentMinorLineXPos+=minorLineDistance}break;default:break}var numberOfMajorLines=(currentXAxisUnits.maxValue-currentXAxisUnits.minValue)/currentXAxisUnits.majorStep;var majorLineDistance=currentInteriorWidth/(currentXAxisUnits.maxValue-currentXAxisUnits.minValue)*currentXAxisUnits.majorStep;var currentMajorLineXPos=currentLeftYAxisWidth+currentXAxisUnits.majorLineWidth/2;var majorLineLength=this.convertToPixels(currentXAxisUnits.majorLineLength,this.getHeight());context.lineWidth=this.convertToPixels(currentXAxisUnits.majorLineWidth,this.getWidth());context.strokeStyle=currentXAxisUnits.majorLineColor;switch(currentXAxisUnits.majorLineStyle){case"solid":for(var i=0;i<numberOfMajorLines;i++){context.beginPath();context.moveTo(currentMajorLineXPos,currentInteriorHeight);context.lineTo(currentMajorLineXPos,currentInteriorHeight+majorLineLength);context.stroke();if(currentXAxisUnits.majorLabelShow){this.labelPainter.color=currentXAxisUnits.majorLabelColor;this.labelPainter.textFont=currentXAxisUnits.majorLabelFont;this.labelPainter.text=currentXAxisUnits.labelFormat(i*currentXAxisUnits.majorStep+currentXAxisUnits.minValue);context.save();context.translate(currentMajorLineXPos,currentInteriorHeight+majorLineLength+currentXAxisUnits.majorLabelFontPadding);this.labelPainter.paint(context,this.getWidth(),this.getHeight);context.restore()}currentMajorLineXPos+=majorLineDistance}break;default:break}var currentLeftYAxisXPos=currentLeftYAxisWidth;var currentRightYAxisXPos=currentLeftYAxisWidth+currentInteriorWidth;for(var k in this.unitTypes){if(k!==this.xAxisUnits){var currentYAxisUnits=this.unitTypes[k];var currentXPos=null;if(currentYAxisNumber%2===0){currentXPos=currentLeftYAxisXPos}else{currentXPos=currentRightYAxisXPos}context.beginPath();context.lineWidth=this.convertToPixels(currentYAxisUnits.lineWidth,this.getHeight());context.strokeStyle=currentYAxisUnits.lineColor;context.moveTo(currentXPos+currentYAxisUnits.lineWidth/2,0);context.lineTo(currentXPos+currentYAxisUnits.lineWidth/2,currentInteriorHeight);context.stroke();var numberOfMinorLines=(currentYAxisUnits.maxValue-currentYAxisUnits.minValue)/currentYAxisUnits.minorStep;var minorLineDistance=currentInteriorHeight/(currentYAxisUnits.maxValue-currentYAxisUnits.minValue)*currentYAxisUnits.minorStep;var currentMinorLineYPos=currentInteriorHeight-currentYAxisUnits.minorLineWidth/2;var minorLineLength=this.convertToPixels(currentYAxisUnits.minorLineLength,this.getWidth());context.lineWidth=this.convertToPixels(currentYAxisUnits.minorLineWidth,this.getWidth());context.strokeStyle=currentYAxisUnits.minorLineColor;switch(currentYAxisUnits.minorLineStyle){case"solid":for(var i=0;i<numberOfMinorLines;i++){if((i*currentYAxisUnits.minorStep-currentYAxisUnits.minValue)%currentYAxisUnits.majorStep!==0){context.beginPath();context.moveTo(currentXPos+currentYAxisUnits.lineWidth/2,currentMinorLineYPos);if(currentYAxisNumber%2===0){context.lineTo(currentXPos+currentYAxisUnits.lineWidth/2-minorLineLength,currentMinorLineYPos)}else{context.lineTo(currentXPos+currentYAxisUnits.lineWidth/2+minorLineLength,currentMinorLineYPos)}context.stroke();if(currentYAxisUnits.minorLabelShow){this.labelPainter.color=currentYAxisUnits.minorLabelColor;this.labelPainter.textFont=currentYAxisUnits.minorLabelFont;this.labelPainter.text=currentYAxisUnits.labelFormat(i*currentYAxisUnits.minorStep+currentYAxisUnits.minValue);context.save();if(currentYAxisNumber%2===0){this.labelPainter.alignmentHorizontal="right";context.translate(currentXPos+currentYAxisUnits.lineWidth/2-minorLineLength,currentMinorLineYPos)}else{this.labelPainter.alignmentHorizontal="left";context.translate(currentXPos+currentYAxisUnits.lineWidth/2+minorLineLength,currentMinorLineYPos)}this.labelPainter.paint(context,this.getWidth(),this.getHeight);context.restore()}}currentMinorLineYPos-=minorLineDistance}break;default:break}var numberOfMajorLines=(currentYAxisUnits.maxValue-currentYAxisUnits.minValue)/currentYAxisUnits.minorStep;var majorLineDistance=currentInteriorHeight/(currentYAxisUnits.maxValue-currentYAxisUnits.minValue)*currentYAxisUnits.majorStep;var currentMajorLineYPos=currentInteriorHeight-currentYAxisUnits.majorLineWidth/2;var majorLineLength=this.convertToPixels(currentYAxisUnits.majorLineLength,this.getWidth());context.lineWidth=this.convertToPixels(currentYAxisUnits.majorLineWidth,this.getWidth());context.strokeStyle=currentYAxisUnits.majorLineColor;switch(currentYAxisUnits.majorLineStyle){case"solid":for(var i=0;i<numberOfMajorLines;i++){if(currentMajorLineYPos>0){context.beginPath();context.moveTo(currentXPos+currentYAxisUnits.lineWidth/2,currentMajorLineYPos);if(currentYAxisNumber%2===0){context.lineTo(currentXPos+currentYAxisUnits.lineWidth/2-majorLineLength,currentMajorLineYPos)}else{context.lineTo(currentXPos+currentYAxisUnits.lineWidth/2+majorLineLength,currentMajorLineYPos)}context.stroke();if(currentYAxisUnits.majorLabelShow){this.labelPainter.color=currentYAxisUnits.majorLabelColor;this.labelPainter.textFont=currentYAxisUnits.majorLabelFont;this.labelPainter.text=currentYAxisUnits.labelFormat(i*currentYAxisUnits.majorStep+currentYAxisUnits.minValue);context.save();if(currentYAxisNumber%2===0){this.labelPainter.alignmentHorizontal="right";context.translate(currentXPos+currentYAxisUnits.lineWidth/2-majorLineLength,currentMajorLineYPos)}else{this.labelPainter.alignmentHorizontal="left";context.translate(currentXPos+currentYAxisUnits.lineWidth/2+majorLineLength,currentMajorLineYPos)}this.labelPainter.paint(context,this.getWidth(),this.getHeight);context.restore()}}currentMajorLineYPos-=majorLineDistance}break;default:break}currentYAxisNumber+=1}}for(var k in this.dataSets){var currentDataSet=this.dataSets[k];var xValues=Object.keys(currentDataSet.points);var currentXAxisUnits=this.unitTypes[this.xAxisUnits];var currentYAxisUnits=this.unitTypes[currentDataSet.units];var runnedOver=false;xValues.map(function(item){return parseInt(item,10)}).sort();context.beginPath();context.lineWidth=this.convertToPixels(currentDataSet.lineWidth,this.getHeight());context.strokeStyle=currentDataSet.lineColor;for(var i=0;i<xValues.length;i++){if(xValues[i]>currentXAxisUnits.maxValue){continue}var xPos=currentLeftYAxisWidth+currentInteriorWidth*((xValues[i]-currentXAxisUnits.minValue)/(currentXAxisUnits.maxValue-currentXAxisUnits.minValue));var yPos=currentInteriorHeight-currentInteriorHeight*((currentDataSet.points[xValues[i]]-currentYAxisUnits.minValue)/(currentYAxisUnits.maxValue-currentYAxisUnits.minValue));if(i>0){context.lineTo(xPos,yPos)}else{context.moveTo(xPos,yPos)}}context.stroke();for(var i=0;i<xValues.length;i++){if(xValues[i]>currentXAxisUnits.maxValue){continue}var xPos=currentLeftYAxisWidth+currentInteriorWidth*((xValues[i]-currentXAxisUnits.minValue)/(currentXAxisUnits.maxValue-currentXAxisUnits.minValue));var yPos=currentInteriorHeight-currentInteriorHeight*((currentDataSet.points[xValues[i]]-currentYAxisUnits.minValue)/(currentYAxisUnits.maxValue-currentYAxisUnits.minValue));switch(currentDataSet.pointStyle){case"circle":context.beginPath();context.arc(xPos,yPos,currentDataSet.pointWidth/2,0,2*Math.PI,false);context.fillStyle=currentDataSet.pointColor;context.fill();break;case"square":context.beginPath();context.rect(xPos-currentDataSet.pointWidth/2,yPos-currentDataSet.pointWidth/2,currentDataSet.pointWidth,currentDataSet.pointWidth);context.fillStyle=currentDataSet.pointColor;context.fill();break;case"triangle":context.beginPath();context.moveTo(xPos-currentDataSet.pointWidth/2,yPos+currentDataSet.pointWidth/2);context.lineTo(xPos+currentDataSet.pointWidth/2,yPos+currentDataSet.pointWidth/2);context.lineTo(xPos,yPos-currentDataSet.pointWidth/2);context.fillStyle=currentDataSet.pointColor;context.fill();break;default:break}}}};function CrocCheckbox(root,tr,t,tl,l,r,bl,b,br,bkg,unchecked){CrocBase.call(this,root);tr=tr||root.themer.getValue(arguments.callee,"tr");t=t||root.themer.getValue(arguments.callee,"t");tl=tl||root.themer.getValue(arguments.callee,"tl");l=l||root.themer.getValue(arguments.callee,"l");r=r||root.themer.getValue(arguments.callee,"r");bl=bl||root.themer.getValue(arguments.callee,"bl");b=b||root.themer.getValue(arguments.callee,"b");br=br||root.themer.getValue(arguments.callee,"br");bkg=bkg||root.themer.getValue(arguments.callee,"bkg");unchecked=unchecked||root.themer.getValue(arguments.callee,"unchecked");this.value=false;this.border=new CrocPanelBorder(root,tl,t,tr,l,r,bl,b,br,bkg);this.uncheckedImage=new CrocImageSimple(root,unchecked);this.addEventListener("pointermove",function(e){this.getRoot().setCursor("pointer");return false});this.addEventListener("pointerleave",function(e){if(!this.hasFocus()){this.setMode("normal")}this.getRoot().setCursor("");return false});this.addEventListener("pointerdown",function(e){this.focus();this.setValue(!this.getValue());this.event("valuechanged",this.getValue());this.setMode("focus")});this.addEventListener("pointerup",function(e){this.blur();this.setMode("hover")})}CrocCheckbox.prototype=Object.create(CrocBase.prototype);CrocCheckbox.prototype.constructor=CrocCheckbox;CrocCheckbox.prototype.getValue=function(){return this.value};CrocCheckbox.prototype.setMode=function(mode){};CrocCheckbox.prototype.setValue=function(value){this.value=value==true;this.getRoot().repaint()};CrocCheckbox.prototype.getWidth=function(){return this.border.getWidth()};CrocCheckbox.prototype.getHeight=function(){return this.border.getHeight()};CrocCheckbox.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}context.save();var currentBorder=this.border;var tlw=currentBorder.topLeftImage.getWidth();var tlh=currentBorder.topLeftImage.getHeight();var brw=currentBorder.bottomRightImage.getWidth();var brh=currentBorder.bottomLeftImage.getHeight();currentBorder.paint(context,tlw+brw+this.uncheckedImage.getWidth(),brh+tlh+this.uncheckedImage.getHeight());if(!this.getValue()){context.translate(tlw,tlh);this.uncheckedImage.paint(context)}context.restore();return};function CrocTabView(root,tr,t,tl,l,r,bl,b,br,bkg,trH,tH,tlH,lH,rH,blH,bH,brH,bkgH,trF,tF,tlF,lF,rF,blF,bF,brF,bkgF){var currentPanelSplit=this;CrocBase.call(this,root);tr=tr||root.themer.getValue(arguments.callee,"tr");t=t||root.themer.getValue(arguments.callee,"t");tl=tl||root.themer.getValue(arguments.callee,"tl");l=l||root.themer.getValue(arguments.callee,"l");r=r||root.themer.getValue(arguments.callee,"r");bl=bl||root.themer.getValue(arguments.callee,"bl");b=b||root.themer.getValue(arguments.callee,"b");br=br||root.themer.getValue(arguments.callee,"br");bkg=bkg||root.themer.getValue(arguments.callee,"bkg");trH=trH||root.themer.getValue(arguments.callee,"trH");tH=tH||root.themer.getValue(arguments.callee,"tH");tlH=tlH||root.themer.getValue(arguments.callee,"tlH");lH=lH||root.themer.getValue(arguments.callee,"lH");rH=rH||root.themer.getValue(arguments.callee,"rH");blH=blH||root.themer.getValue(arguments.callee,"blH");bH=bH||root.themer.getValue(arguments.callee,"bH");brH=brH||root.themer.getValue(arguments.callee,"brH");bkgH=bkgH||root.themer.getValue(arguments.callee,"bkgH");trF=trF||root.themer.getValue(arguments.callee,"trF");tF=tF||root.themer.getValue(arguments.callee,"tF");tlF=tlF||root.themer.getValue(arguments.callee,"tlF");lF=lF||root.themer.getValue(arguments.callee,"lF");rF=rF||root.themer.getValue(arguments.callee,"rF");blF=blF||root.themer.getValue(arguments.callee,"blF");bF=bF||root.themer.getValue(arguments.callee,"bF");brF=brF||root.themer.getValue(arguments.callee,"brF");bkgF=bkgF||root.themer.getValue(arguments.callee,"bkgF");this.tabs={};this.tabSize="42px";this.tabLength="80px";this.tabSpacing="2px";this.currentTab=null;this.tabPosition="top"}CrocTabView.prototype=Object.create(CrocBase.prototype);CrocTabView.prototype.constructor=CrocTabView;CrocTabView.prototype._tabMouseMove=function(tab){this.getRoot().setCursor("pointer");if(this.tabs[this.currentTab]===tab){return}tab.setMode("hover")};CrocTabView.prototype._tabMouseLeave=function(tab){this.getRoot().setCursor();if(this.tabs[this.currentTab]===tab){return}tab.setMode("normal")};CrocTabView.prototype._tabMouseDown=function(tab){for(var k in this.tabs){if(this.tabs[k]===tab){this.setCurrentTabByUuid(k);return}}};CrocTabView.prototype._tabMouseUp=function(tab){};CrocTabView.prototype.setTabPosition=function(position){this.tabPosition=position||"top";this.getRoot().repaint()};CrocTabView.prototype.setTabSize=function(size){this.tabSize=size||"42px";this.getRoot().repaint()};CrocTabView.prototype.setCurrentTabByUuid=function(uuid){if(this.tabs[uuid]===undefined){return}if(this.curretTab!==null&&this.tabs[this.currentTab]!==undefined){this.tabs[this.currentTab].setMode("normal")}this.currentTab=uuid;this.tabs[this.currentTab].setMode("pressed");this.getRoot().repaint()};CrocTabView.prototype.setCurrentTab=function(number){if(!(number<this.children.length)||number<0){return}this.setCurrentTabByUuid(this.children[number].uuid)};CrocTabView.prototype.addChild=function(uiObject,label){if(CrocBase.prototype.addChild.call(this,uiObject)===false){return false}this.tabs[uiObject.uuid]=label.toString();var currentTabView=this;this.tabs[uiObject.uuid]=new CrocButtonLabeled(this.getRoot(),label.toString(),this.tr,this.t,this.tl,this.l,this.r,this.bl,this.b,this.br,this.bkg,this.trH,this.tH,this.tlH,this.lH,this.rH,this.blH,this.bH,this.brH,this.bkgH,this.trF,this.tF,this.tlF,this.lF,this.rF,this.blF,this.bF,this.brF,this.bkgF);this.tabs[uiObject.uuid].removeAllEventListeners();this.tabs[uiObject.uuid].addEventListener("pointermove",function(e){currentTabView._tabMouseMove(this);return false});this.tabs[uiObject.uuid].addEventListener("pointerleave",function(e){currentTabView._tabMouseLeave(this);return false});this.tabs[uiObject.uuid].addEventListener("pointerdown",function(e){currentTabView._tabMouseDown(this);return false});this.tabs[uiObject.uuid].addEventListener("pointerup",function(e){currentTabView._tabMouseUp(this);return false});if(this.currentTab===null){this.setCurrentTabByUuid(uiObject.uuid)}this.getRoot().repaint();return true};CrocTabView.prototype.removeChild=function(uiObject){if(CrocBase.prototype.removeChild.call(this,uiObject)===false){return false}delete this.tabs[uiObject.uuid];this.getRoot().repaint();return true};CrocTabView.prototype.removeAllChildren=function(){CrocBase.prototype.removeAllChildren.call(this);this.getRoot().repaint()};CrocTabView.prototype.hitTest=function(context,x,y,width,height){context.save();var hitReturn=[];var hitObject=CrocBase.prototype.hitTest.call(this,context,x,y,width,height);if(hitObject!==null){hitReturn.push(hitObject)}var tabsWidth=0;var tabSpacing=0;var childWidth=0;var childHeight=0;var realTabSize=0;switch(this.tabPosition){case"top":realTabSize=this.convertToPixels(this.tabSize,this.getHeight());childWidth=this.getWidth();childHeight=this.getHeight()-realTabSize;tabsWidth=this.convertToPixels(this.tabLength,this.getWidth());tabSpacing=this.convertToPixels(this.tabSpacing,this.getWidth());break;case"bottom":realTabSize=this.convertToPixels(this.tabSize,this.getHeight());childWidth=this.getWidth();childHeight=this.getHeight()-realTabSize;tabsWidth=this.convertToPixels(this.tabLength,this.getWidth());tabSpacing=this.convertToPixels(this.tabSpacing,this.getWidth());context.translate(0,childHeight);break;case"left":realTabSize=this.convertToPixels(this.tabSize,this.getWidth());childWidth=this.getWidth()-realTabSize;childHeight=this.getHeight();tabsWidth=this.convertToPixels(this.tabLength,this.getHeight());tabSpacing=this.convertToPixels(this.tabSpacing,this.getHeight());context.rotate(-Math.PI/2);context.translate(-this.getHeight(),0);break;case"right":realTabSize=this.convertToPixels(this.tabSize,this.getWidth());childWidth=this.getWidth()-realTabSize;childHeight=this.getHeight();tabsWidth=this.convertToPixels(this.tabLength,this.getHeight());tabSpacing=this.convertToPixels(this.tabSpacing,this.getHeight());context.rotate(Math.PI/2);context.translate(0,-childWidth-realTabSize);break}for(var k in this.tabs){hitObject=this.tabs[k].hitTest(context,x,y,tabsWidth,realTabSize);if(hitObject!==null){hitReturn.push(hitObject)}context.translate(tabsWidth+tabSpacing,0)}context.restore();context.save();switch(this.tabPosition){case"top":context.translate(0,realTabSize);break;case"bottom":break;case"left":context.translate(realTabSize,0);break;case"right":break}for(var i=0;i<this.children.length;i++){if(this.children[i].uuid===this.currentTab){hitObject=this.children[i].hitTest(context,x,y,childWidth,childHeight);if(hitObject!==null){hitReturn.push(hitObject)}break}}context.restore();return hitReturn};CrocTabView.prototype.paint=function(context,width,height){CrocBase.prototype.paint.call(this,context,width,height);if(!this.visible){return}context.save();var tabsWidth=0;var tabSpacing=0;var childWidth=0;var childHeight=0;var realTabSize=0;switch(this.tabPosition){case"top":realTabSize=this.convertToPixels(this.tabSize,this.getHeight());childWidth=this.getWidth();childHeight=this.getHeight()-realTabSize;tabsWidth=this.convertToPixels(this.tabLength,this.getWidth());tabSpacing=this.convertToPixels(this.tabSpacing,this.getWidth());break;case"bottom":realTabSize=this.convertToPixels(this.tabSize,this.getHeight());childWidth=this.getWidth();childHeight=this.getHeight()-realTabSize;tabsWidth=this.convertToPixels(this.tabLength,this.getWidth());tabSpacing=this.convertToPixels(this.tabSpacing,this.getWidth());context.translate(0,childHeight);break;case"left":realTabSize=this.convertToPixels(this.tabSize,this.getWidth());childWidth=this.getWidth()-realTabSize;childHeight=this.getHeight();tabsWidth=this.convertToPixels(this.tabLength,this.getHeight());tabSpacing=this.convertToPixels(this.tabSpacing,this.getHeight());context.rotate(-Math.PI/2);context.translate(-this.getHeight(),0);break;case"right":realTabSize=this.convertToPixels(this.tabSize,this.getWidth());childWidth=this.getWidth()-realTabSize;childHeight=this.getHeight();tabsWidth=this.convertToPixels(this.tabLength,this.getHeight());tabSpacing=this.convertToPixels(this.tabSpacing,this.getHeight());context.rotate(Math.PI/2);context.translate(0,-childWidth-realTabSize);break}for(var k in this.tabs){this.tabs[k].paint(context,tabsWidth,realTabSize);context.translate(tabsWidth+tabSpacing,0)}context.restore();context.save();switch(this.tabPosition){case"top":context.translate(0,realTabSize);break;case"bottom":break;case"left":context.translate(realTabSize,0);break;case"right":break}for(var i=0;i<this.children.length;i++){if(this.children[i].uuid===this.currentTab){this.children[i].paint(context,childWidth,childHeight);break}}context.restore()};function CrocEventHandler(root){var currentEventHandler=this;this.root=root;this.lastMouseEvent={};this.lastTriggeredObject=null;this.triggeredObject=null;this.keysDown=[];this.root.canvas.addEventListener("mousemove",function(e){currentEventHandler.onMouseMove(e)});this.root.canvas.addEventListener("mousedown",function(e){currentEventHandler.onMouseDown(e)});this.root.canvas.addEventListener("mouseup",function(e){currentEventHandler.onMouseUp(e)});this.root.canvas.addEventListener("mousewheel",function(e){currentEventHandler.onMouseWheel(e)},false);this.root.canvas.addEventListener("mouseout",function(e){currentEventHandler.onMouseOut(e)},false);this.root.canvas.addEventListener("DOMMouseScroll",function(e){currentEventHandler.onMouseWheel(e)},false);this.root.canvas.addEventListener("click",function(e){currentEventHandler.onClick(e)});this.root.canvas.addEventListener("keydown",function(e){currentEventHandler.onKeyDown(e)},false);this.root.canvas.addEventListener("keyup",function(e){currentEventHandler.onKeyUp(e)},false);this.root.canvas.addEventListener("touchmove",function(e){if(e.changedTouches!==undefined&&e.changedTouches[0]!==undefined){e.clientX=e.changedTouches[0].clientX;e.clientY=e.changedTouches[0].clientY}currentEventHandler.onMouseMove(e);return currentEventHandler._onEventAbsorb(e)},false);this.root.canvas.addEventListener("touchstart",function(e){if(e.changedTouches!==undefined&&e.changedTouches[0]!==undefined){e.clientX=e.changedTouches[0].clientX;e.clientY=e.changedTouches[0].clientY}currentEventHandler.onMouseDown(e);return currentEventHandler._onEventAbsorb(e)},false);this.root.canvas.addEventListener("touchend",function(e){if(e.changedTouches!==undefined&&e.changedTouches[0]!==undefined){e.clientX=e.changedTouches[0].clientX;e.clientY=e.changedTouches[0].clientY}currentEventHandler.onMouseUp(e);return currentEventHandler._onEventAbsorb(e)},false);window.addEventListener("resize",function(){currentEventHandler.onCanvasResize()},false)}CrocEventHandler.prototype._onEventAbsorb=function(event){var e=event||window.event;e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();e.cancelBubble=true;e.returnValue=false;return false};CrocEventHandler.prototype.onCanvasResize=function(){if(this.root.fullscreen){this.root.canvas.width=window.innerWidth;this.root.canvas.height=window.innerHeight;this.root.hitCanvas.width=window.innerWidth;this.root.hitCanvas.height=window.innerHeight}this.root.repaint()};CrocEventHandler.prototype.sendHitEvent=function(coords,eventType){var hits=this.root.hitTest(coords.x,coords.y);coords.root=this.root.getLocalHitCoord();if(this.root.focusedObject!==null){coords.local=this.root.focusedObject.getLocalHitCoord();this.root.focusedObject.event(eventType,coords)}else{if(this.propagateHitEvent(hits,eventType,coords)===true){this.triggeredObject=null}}};CrocEventHandler.prototype.onMouseMove=function(e){var rect=this.root.canvas.getBoundingClientRect();var coords={x:e.clientX-rect.left,y:e.clientY-rect.top};this.lastMouseEvent=e;this.sendHitEvent(coords,"pointermove");if(this.lastTriggeredObject!==this.triggeredObject){if(this.triggeredObject!==null){this.triggeredObject.event("pointerenter",coords)}if(this.lastTriggeredObject!==null){this.lastTriggeredObject.event("pointerleave",coords)}}this.lastTriggeredObject=this.triggeredObject};CrocEventHandler.prototype.onMouseDown=function(e){var rect=this.root.canvas.getBoundingClientRect();var coords={x:e.clientX-rect.left,y:e.clientY-rect.top};this.sendHitEvent(coords,"pointerdown")};CrocEventHandler.prototype.onMouseWheel=function(e){var e=window.event||e;var delta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));delta=delta*4;var eventData={delta:delta,data:e};e=this.lastMouseEvent;var rect=this.root.canvas.getBoundingClientRect();var coords={x:e.clientX-rect.left,y:e.clientY-rect.top,delta:delta,data:e};var currentEventType="scrollverticle";if(this.keysDown.indexOf("Shift")>=0){currentEventType="scrollhorizontal"}this.sendHitEvent(coords,currentEventType)};CrocEventHandler.prototype.onMouseOut=function(e){if(this.root.focusedObject!==null){this.root.focusedObject.event("pointerout",e,true)}};CrocEventHandler.prototype.onMouseUp=function(e){var rect=this.root.canvas.getBoundingClientRect();var coords={x:e.clientX-rect.left,y:e.clientY-rect.top};this.sendHitEvent(coords,"pointerup")};CrocEventHandler.prototype.onClick=function(e){var rect=this.root.canvas.getBoundingClientRect();var coords={x:e.clientX-rect.left,y:e.clientY-rect.top};this.sendHitEvent(coords,"click")};CrocEventHandler.prototype.onKeyDown=function(e){if(this.keysDown.indexOf(e.key)<0){this.keysDown.push(e.key)}this.root.event("keydown",e,false);if(this.root.focusedObject!==null){this.root.focusedObject.event("keydown",e,true)}};CrocEventHandler.prototype.onKeyUp=function(e){if(this.keysDown.indexOf(e.key)>=0){this.keysDown.splice(this.keysDown.indexOf(e.key))}this.root.event("keyup",e,false);if(this.root.focusedObject!==null){this.root.focusedObject.event("keyup",e,true)}};CrocEventHandler.prototype.propagateHitEvent=function(objects,event,data){if(objects.length!==undefined){for(var i=0;i<objects.length;i++){if(this.propagateHitEvent(objects[i],event,data)===false){return false}}}else if(typeof objects==="object"&&objects.event!==undefined&&typeof objects.event==="function"){data.local=objects.getLocalHitCoord();if(objects.event(event,data)===false){this.triggeredObject=objects;return false}}return true};function CrocThemer(root){this.values={};this.root=root}CrocThemer.prototype.importTheme=function(theme,callback){var currentThemer=this;var constructorNames=Object.keys(theme);for(var constructorName in theme){if(window[constructorName]!==undefined&&typeof window[constructorName]==="function"){for(var tag in theme[constructorName]){this.setValue(window[constructorName],tag,theme[constructorName][tag])}}}function _importCrocThemeHelper(){if(constructorNames.length<=0){callback.call(currentThemer,false);return}var constructorName=constructorNames.shift();var tagKeys=Object.keys(theme[constructorName]);function _importThemeHelper(){if(tagKeys.length<=0){_importCrocThemeHelper();return}var currentTag=tagKeys.shift();currentThemer.setValue(window[constructorName],currentTag,theme[constructorName][currentTag]);if(/\.png$|\.svg$|\.jpg$|\.bmp/.test(theme[constructorName][currentTag])){currentThemer.root.loadImage(theme[constructorName][currentTag],function(){_importThemeHelper()})}else{_importThemeHelper()}}_importThemeHelper()}_importCrocThemeHelper()};CrocThemer.prototype.setValue=function(constructor,tag,value){if(this.values[constructor]===undefined){this.values[constructor]={}}this.values[constructor][tag]=value;return};CrocThemer.prototype.getValue=function(constructor,tag){if(this.values[constructor]===undefined){return null}if(this.values[constructor][tag]===undefined){return null}return this.values[constructor][tag]};crocThemeDefault={CrocAnalogMeter:{needleImage:"theme/CrocAnalogMeter/needle.png",backgroundImage:"theme/CrocAnalogMeter/background.png",valueLabelFont:"18px Helvetica Bold",valueLabelFontColor:"black"},CrocButtonLabeled:{tr:"theme/CrocButtonLabeled/normal-topright.png",t:"theme/CrocButtonLabeled/normal-top.png",tl:"theme/CrocButtonLabeled/normal-topleft.png",l:"theme/CrocButtonLabeled/normal-left.png",r:"theme/CrocButtonLabeled/normal-right.png",bl:"theme/CrocButtonLabeled/normal-bottomleft.png",b:"theme/CrocButtonLabeled/normal-bottom.png",br:"theme/CrocButtonLabeled/normal-bottomright.png",bkg:"theme/CrocButtonLabeled/normal-center.png",trH:"theme/CrocButtonLabeled/hover-topright.png",tH:"theme/CrocButtonLabeled/hover-top.png",tlH:"theme/CrocButtonLabeled/hover-topleft.png",lH:"theme/CrocButtonLabeled/hover-left.png",rH:"theme/CrocButtonLabeled/hover-right.png",blH:"theme/CrocButtonLabeled/hover-bottomleft.png",bH:"theme/CrocButtonLabeled/hover-bottom.png",brH:"theme/CrocButtonLabeled/hover-bottomright.png",bkgH:"theme/CrocButtonLabeled/normal-center.png",trF:"theme/CrocButtonLabeled/pressed-topright.png",tF:"theme/CrocButtonLabeled/pressed-top.png",tlF:"theme/CrocButtonLabeled/pressed-topleft.png",lF:"theme/CrocButtonLabeled/pressed-left.png",rF:"theme/CrocButtonLabeled/pressed-right.png",blF:"theme/CrocButtonLabeled/pressed-bottomleft.png",bF:"theme/CrocButtonLabeled/pressed-bottom.png",brF:"theme/CrocButtonLabeled/pressed-bottomright.png",bkgF:"theme/CrocButtonLabeled/normal-center.png"},CrocCheckbox:{tr:"theme/CrocCheckbox/topright.png",t:"theme/CrocCheckbox/top.png",tl:"theme/CrocCheckbox/topleft.png",l:"theme/CrocCheckbox/left.png",r:"theme/CrocCheckbox/right.png",bl:"theme/CrocCheckbox/bottomleft.png",b:"theme/CrocCheckbox/bottom.png",br:"theme/CrocCheckbox/bottomright.png",bkg:"theme/CrocCheckbox/center.png",unchecked:"theme/CrocCheckbox/center-unchecked.png"},CrocLabel:{font:"18px Helvetica",color:"black"},CrocPanelBorder:{tr:"theme/CrocPanelBorder/topright.png",t:"theme/CrocPanelBorder/top.png",tl:"theme/CrocPanelBorder/topleft.png",l:"theme/CrocPanelBorder/left.png",r:"theme/CrocPanelBorder/right.png",bl:"theme/CrocPanelBorder/bottomleft.png",b:"theme/CrocPanelBorder/bottom.png",br:"theme/CrocPanelBorder/bottomright.png",bkg:"theme/CrocPanelBorder/center.png"},CrocPanelList:{spacing:"10px",orientation:"verticle"},CrocPanelScrollable:{tr:"theme/CrocPanelScrollable/topright.png",t:"theme/CrocPanelScrollable/top.png",tl:"theme/CrocPanelScrollable/topleft.png",l:"theme/CrocPanelScrollable/left.png",r:"theme/CrocPanelScrollable/right.png",bl:"theme/CrocPanelScrollable/bottomleft.png",b:"theme/CrocPanelScrollable/bottom.png",br:"theme/CrocPanelScrollable/bottomright.png",bkg:"theme/CrocPanelScrollable/center.png",scrollArrow:"theme/CrocPanelScrollable/scroll-arrow.png",scrollEndcap:"theme/CrocPanelScrollable/scroll-endcap.png",scrollCenter:"theme/CrocPanelScrollable/scroll-center.png",scrollArrowHover:"theme/CrocPanelScrollable/scroll-arrow.png",scrollEndcapHover:"theme/CrocPanelScrollable/scroll-endcap.png",scrollCenterHover:"theme/CrocPanelScrollable/scroll-center.png",scrollArrowPressed:"theme/CrocPanelScrollable/scroll-arrow.png",scrollEndcapPressed:"theme/CrocPanelScrollable/scroll-endcap.png",scrollCenterPressed:"theme/CrocPanelScrollable/scroll-center.png"},CrocPanelSplit:{tr:"theme/CrocPanelSplit/groove-topright.png",t:"theme/CrocPanelSplit/groove-top.png",tl:"theme/CrocPanelSplit/groove-topleft.png",l:"theme/CrocPanelSplit/groove-left.png",r:"theme/CrocPanelSplit/groove-right.png",bl:"theme/CrocPanelSplit/groove-bottomleft.png",b:"theme/CrocPanelSplit/groove-bottom.png",br:"theme/CrocPanelSplit/groove-bottomright.png",bkg:"theme/CrocPanelSplit/groove-center.png",trH:"theme/CrocPanelSplit/groove-highlight-topright.png",tH:"theme/CrocPanelSplit/groove-highlight-top.png",tlH:"theme/CrocPanelSplit/groove-highlight-topleft.png",lH:"theme/CrocPanelSplit/groove-highlight-left.png",rH:"theme/CrocPanelSplit/groove-highlight-right.png",blH:"theme/CrocPanelSplit/groove-highlight-bottomleft.png",bH:"theme/CrocPanelSplit/groove-highlight-bottom.png",brH:"theme/CrocPanelSplit/groove-highlight-bottomright.png",bkgH:"theme/CrocPanelSplit/groove-highlight-center.png",trF:"theme/CrocPanelSplit/groove-highlight-topright.png",tF:"theme/CrocPanelSplit/groove-highlight-top.png",tlF:"theme/CrocPanelSplit/groove-highlight-topleft.png",lF:"theme/CrocPanelSplit/groove-highlight-left.png",rF:"theme/CrocPanelSplit/groove-highlight-right.png",blF:"theme/CrocPanelSplit/groove-highlight-bottomleft.png",bF:"theme/CrocPanelSplit/groove-highlight-bottom.png",brF:"theme/CrocPanelSplit/groove-highlight-bottomright.png",bkgF:"theme/CrocPanelSplit/groove-highlight-center.png"},CrocProgressBar:{tr:"theme/CrocProgressBar/groove-topright.png",t:"theme/CrocProgressBar/groove-top.png",tl:"theme/CrocProgressBar/groove-topleft.png",l:"theme/CrocProgressBar/groove-left.png",r:"theme/CrocProgressBar/groove-right.png",bl:"theme/CrocProgressBar/groove-bottomleft.png",b:"theme/CrocProgressBar/groove-bottom.png",br:"theme/CrocProgressBar/groove-bottomright.png",bkg:"theme/CrocProgressBar/groove-center.png",progressLeft:"theme/CrocProgressBar/progress-left.png",progressRight:"theme/CrocProgressBar/progress-right.png",progressCenter:"theme/CrocProgressBar/progress-center.png"},CrocSlider:{tr:"theme/CrocSlider/groove-topright.png",t:"theme/CrocSlider/groove-top.png",tl:"theme/CrocSlider/groove-topleft.png",l:"theme/CrocSlider/groove-left.png",r:"theme/CrocSlider/groove-right.png",bl:"theme/CrocSlider/groove-bottomleft.png",b:"theme/CrocSlider/groove-bottom.png",br:"theme/CrocSlider/groove-bottomright.png",bkg:"theme/CrocSlider/groove-center.png",slider:"theme/CrocSlider/horizontal-slider-handle.png",hover:"theme/CrocSlider/horizontal-slider-hover.png",focus:"theme/CrocSlider/horizontal-slider-focus.png"},CrocTabView:{tr:"theme/CrocTextfield/base-topright.png",t:"theme/CrocTextfield/base-top.png",tl:"theme/CrocTextfield/base-topleft.png",l:"theme/CrocTextfield/base-left.png",r:"theme/CrocTextfield/base-right.png",bl:"theme/CrocTextfield/base-bottomleft.png",b:"theme/CrocTextfield/base-bottom.png",br:"theme/CrocTextfield/base-bottomright.png",bkg:"theme/CrocTextfield/base-center.png",trH:"theme/CrocTextfield/hover-topright.png",tH:"theme/CrocTextfield/hover-top.png",tlH:"theme/CrocTextfield/hover-topleft.png",lH:"theme/CrocTextfield/hover-left.png",rH:"theme/CrocTextfield/hover-right.png",blH:"theme/CrocTextfield/hover-bottomleft.png",bH:"theme/CrocTextfield/hover-bottom.png",brH:"theme/CrocTextfield/hover-bottomright.png",bkgH:"theme/CrocTextfield/base-center.png",trF:"theme/CrocTextfield/focus-topright.png",tF:"theme/CrocTextfield/focus-top.png",tlF:"theme/CrocTextfield/focus-topleft.png",lF:"theme/CrocTextfield/focus-left.png",rF:"theme/CrocTextfield/focus-right.png",blF:"theme/CrocTextfield/focus-bottomleft.png",bF:"theme/CrocTextfield/focus-bottom.png",brF:"theme/CrocTextfield/focus-bottomright.png",bkgF:"theme/CrocTextfield/base-center.png"},CrocTextfield:{tr:"theme/CrocTextfield/base-topright.png",t:"theme/CrocTextfield/base-top.png",tl:"theme/CrocTextfield/base-topleft.png",l:"theme/CrocTextfield/base-left.png",r:"theme/CrocTextfield/base-right.png",bl:"theme/CrocTextfield/base-bottomleft.png",b:"theme/CrocTextfield/base-bottom.png",br:"theme/CrocTextfield/base-bottomright.png",bkg:"theme/CrocTextfield/base-center.png",trH:"theme/CrocTextfield/hover-topright.png",tH:"theme/CrocTextfield/hover-top.png",tlH:"theme/CrocTextfield/hover-topleft.png",lH:"theme/CrocTextfield/hover-left.png",rH:"theme/CrocTextfield/hover-right.png",blH:"theme/CrocTextfield/hover-bottomleft.png",bH:"theme/CrocTextfield/hover-bottom.png",brH:"theme/CrocTextfield/hover-bottomright.png",bkgH:"theme/CrocTextfield/base-center.png",trF:"theme/CrocTextfield/focus-topright.png",tF:"theme/CrocTextfield/focus-top.png",tlF:"theme/CrocTextfield/focus-topleft.png",lF:"theme/CrocTextfield/focus-left.png",rF:"theme/CrocTextfield/focus-right.png",blF:"theme/CrocTextfield/focus-bottomleft.png",bF:"theme/CrocTextfield/focus-bottom.png",brF:"theme/CrocTextfield/focus-bottomright.png",bkgF:"theme/CrocTextfield/base-center.png"}};function CrocRoot(canvas,hitCanvas,fullscreen,eventHandlerConstructor){CrocBase.call(this,this);eventHandlerConstructor=eventHandlerConstructor||CrocEventHandler;this.fullscreen=fullscreen||false;this.canvas=canvas;this.hitCanvas=hitCanvas;this.scaleFactorX=1;this.scaleFactorY=1;this.lastCorrectedDPIRatio=1;this.lastCorrectedWidth=0;this.lastCorrectedHeight=0;this.context=canvas.getContext("2d");this.hitContext=hitCanvas.getContext("2d");if(this.context.mozCurrentTransform===undefined&&this.context.currenTransform===undefined){this.hitContext=new CanvasWrapper(this.hitContext);this.context=new CanvasWrapper(this.context);this.context.getCurrentTransform=function(){var matrix=this.getMatrix();return[matrix[0][0],matrix[0][1],matrix[1][0],matrix[1][1],matrix[2][0],matrix[2][1]]};this.context.getContext=function(){return this.canvas};this.hitContext.getCurrentTransform=function(){var matrix=this.getMatrix();if(matrix===undefined){console.trace()}return[matrix[0][0],matrix[0][1],matrix[1][0],matrix[1][1],matrix[2][0],matrix[2][1]]};this.hitContext.getContext=function(){return this.canvas}}else{this.context.getCurrentTransform=function(){if(this.mozCurrentTransform!==undefined){return this.mozCurrentTransform}else{return this.currenTransform}};this.context.getContext=function(){return this};this.hitContext.getCurrentTransform=function(){if(this.mozCurrentTransform!==undefined){return this.mozCurrentTransform}else{return this.currenTransform}};this.hitContext.getContext=function(){return this}}if(this.context.measureText===undefined){this.context.measureText=function(text){return getTextWidthDOM(text,this.font)}}this.focusedObject=null;var currentCrocRoot=this;this.imageStore={};this.imageStoreListeners={};this.dirty=false;this.paintWarnings=[];this.globalPaintWarning=false;this.loaded=false;this.eventHandler=new eventHandlerConstructor(this);if(this.fullscreen){this.canvas.width=window.innerWidth;this.canvas.height=window.innerHeight;this.hitCanvas.width=window.innerWidth;this.hitCanvas.height=window.innerHeight}this.themer=new CrocThemer(this);this.themer.importTheme(crocThemeDefault,function(err){currentCrocRoot.loaded=true;currentCrocRoot.event("loaded",{});currentCrocRoot.repaint()})}CrocRoot.prototype=Object.create(CrocBase.prototype);CrocRoot.prototype.constructor=CrocRoot;CrocRoot.prototype.onReady=function(callback){var currentCrocRoot=this;if(this.loaded){callback.call(this,false);return}var waitingEventCallback=this.addEventListener("loaded",function(data){currentCrocRoot.removeEventListener("loaded",waitingEventCallback);callback.call(currentCrocRoot,false)})};CrocRoot.prototype.getCrocRoot=function(){return this};CrocRoot.prototype.onCanvasResize=function(){this.repaint()};CrocRoot.prototype.getDPIRatio=function(){var devicePixelRatio=window.devicePixelRatio||1;var backingStoreRatio=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1;return devicePixelRatio/backingStoreRatio};CrocRoot.prototype.correctCanvasSize=function(){var oldWidth=this.canvas.width;var oldHeight=this.canvas.height;var dpiRatio=this.getDPIRatio();if(this.lastCorrectedWidth===oldWidth&&this.lastCorrectedHeight===oldHeight&&this.lastCorrectedDPIRatio===dpiRatio){return}if(dpiRatio!==1){this.canvas.width=oldWidth*dpiRatio;this.canvas.height=oldHeight*dpiRatio;this.canvas.style.width=oldWidth+"px";this.canvas.style.height=oldHeight+"px"}this.lastCorrectedWidth=this.canvas.width;this.lastCorrectedHeight=this.canvas.height;this.lastCorrectedDPIRatio=dpiRatio};CrocRoot.prototype.setWidth=function(width){if(this.fullscreen){return}this.canvas.width=width;this.hitCanvas.width=width;this.repaint()};CrocRoot.prototype.setHeight=function(height){if(this.fullscreen){return}this.canvas.height=height;this.hitCanvas.height=height;this.repaint()};CrocRoot.prototype.getWidth=function(){var dpiRatio=this.getDPIRatio();if(this.fullscreen){return window.innerWidth/this.scaleFactorX/dpiRatio}return this.canvas.width/this.scaleFactorX/dpiRatio};CrocRoot.prototype.getHeight=function(){var dpiRatio=this.getDPIRatio();if(this.fullscreen){return window.innerHeight/this.scaleFactorY/dpiRatio}return this.canvas.height/this.scaleFactorY/dpiRatio};CrocRoot.prototype.clear=function(){var dpiRatio=this.getDPIRatio();this.context.save();this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.restore()};CrocRoot.prototype.clearHitContext=function(){this.hitContext.save();this.hitContext.setTransform(1,0,0,1,0,0);this.hitContext.clearRect(0,0,this.hitCanvas.width,this.hitCanvas.height);this.hitContext.restore()};CrocRoot.prototype.setFocusedObject=function(object){if(this.focusedObject!==undefined&&this.focusedObject!==null){this.focusedObject.event("blur",object)}this.focusedObject=object;this.event("objectfocusedset",object);return this.focusedObject};CrocRoot.prototype.getFocusedObject=function(){return this.focusedObject};CrocRoot.prototype.addPaintWarning=function(object,transform,width,height){var tl=this.transformPoint(transform,0,0);var tr=this.transformPoint(transform,width,0);var bl=this.transformPoint(transform,0,height);var br=this.transformPoint(transform,width,height);var sX=Math.min(tl.x,tr.x,bl.x,br.x);var sY=Math.min(tl.y,tr.y,bl.y,br.y);var mX=Math.max(tl.x,tr.x,bl.x,br.x);var mY=Math.max(tl.y,tr.y,bl.y,br.y);this.paintWarnings.push({object:object,min:{x:sX,y:sY},max:{x:mX,y:mY}});return};CrocRoot.prototype.clearPaintWarnings=function(){this.paintWarnings=[];return};CrocRoot.prototype.setGlobalPaintWarning=function(warning){this.globalPaintWarning=warning;this.repaint()};CrocRoot.prototype.testPaintWarnings=function(object,transform){var tl=this.transformPoint(transform,0,0);var tr=this.transformPoint(transform,object.getWidth(),0);var bl=this.transformPoint(transform,0,object.getHeight());var br=this.transformPoint(transform,object.getWidth(),object.getHeight());var sX=Math.min(tl.x,tr.x,bl.x,br.x);var sY=Math.min(tl.y,tr.y,bl.y,br.y);var mX=Math.max(tl.x,tr.x,bl.x,br.x);var mY=Math.max(tl.y,tr.y,bl.y,br.y);for(var i=0;i<this.paintWarnings.length;i++){var currentPaintWarning=this.paintWarnings[i];if(this.globalPaintWarning){currentPaintWarning.object.event("paintWarning",object)}else if(sX<currentPaintWarning.max.x&&mX>currentPaintWarning.min.x&&sY<currentPaintWarning.max.y&&mY>currentPaintWarning.min.y){currentPaintWarning.object.event("paintWarning",object)}}};CrocRoot.prototype.repaint=function(){if(this.dirty){return}this.dirty=true;var currentCrocRoot=this;window.requestAnimationFrame(function(){currentCrocRoot.paint()})};CrocRoot.prototype.loadImage=function(src,callback){var currentCrocRoot=this;if(src in this.imageStore){if(this.imageStore[src].loaded){if(callback!==undefined){callback.call(currentCrocRoot,false)}}else{if(!(src in this.imageStoreListeners)){this.imageStoreListeners[src]=[]}this.imageStoreListeners[src].push(callback)}return}var image=new Image;this.imageStore[src]={image:image,loaded:false};if(!(src in this.imageStoreListeners)){this.imageStoreListeners[src]=[]}this.imageStoreListeners[src].push(callback);image.onload=function(){currentCrocRoot.onImageLoad.call(currentCrocRoot,this.origSrc);if(this.origSrc in currentCrocRoot.imageStoreListeners){for(var i=0;i<currentCrocRoot.imageStoreListeners[this.origSrc].length;i++){currentCrocRoot.imageStoreListeners[this.origSrc][i].call(currentCrocRoot,false)}currentCrocRoot.imageStoreListeners[this.origSrc]=[]}};image.onerror=function(err){currentCrocRoot.imageStore[this.origSrc].image=null;currentCrocRoot.onImageLoad.call(currentCrocRoot,this.origSrc);if(this.origSrc in currentCrocRoot.imageStoreListeners){for(var i=0;i<currentCrocRoot.imageStoreListeners[this.origSrc].length;i++){currentCrocRoot.imageStoreListeners[this.origSrc][i].call(currentCrocRoot,err)}currentCrocRoot.imageStoreListeners[this.origSrc]=[]}};image.origSrc=src;image.src=src};CrocRoot.prototype.setCursor=function(type){window.document.body.style.cursor=type||"";return};CrocRoot.prototype.onImageLoad=function(src){if(src===undefined){return}if(!(src in this.imageStore)){this.error("Wasn't waiting for image \""+src+'" to load but got event anyway?!');return}this.imageStore[src].loaded=true;this.repaint();this.event("imageload",{src:src},true);return};CrocRoot.prototype.getImage=function(src){if(src===undefined){return}if(!(src in this.imageStore)){this.error('No such image "'+src+'" in image storage!');return null}if(this.imageStore[src].loaded){return this.imageStore[src].image}return null};CrocRoot.prototype.hitTest=function(x,y){x=x||0;y=y||0;var hitReturn=[];var hitObject=null;this.hitContext.save();this.clearHitContext();this.hitContext.scale(this.scaleFactorX,this.scaleFactorY);this.rootTransform=this.hitContext.getCurrentTransform();var newWidthHeight=this.transformPoint(this.inverseTransform(this.context.getCurrentTransform()),this.getWidth(),this.getHeight());for(var i=0;i<this.children.length;i++){hitObject=this.children[i].hitTest(this.hitContext,x,y,this.getWidth(),this.getHeight());if(hitObject!==null){hitReturn.push(hitObject)}}this.hitContext.restore();return hitReturn};CrocRoot.prototype.setScaleFactor=function(factor,yScale){this.scaleFactorX=factor;this.scaleFactorY=yScale||factor;this.repaint()};CrocRoot.prototype.setSmooth=function(smooth){this.context["imageSmoothingEnabled"]=smooth;this.context["mozImageSmoothingEnabled"]=smooth;this.context["oImageSmoothingEnabled"]=smooth;this.context["webkitImageSmoothingEnabled"]=smooth;this.context["msImageSmoothingEnabled"]=smooth};CrocRoot.prototype.paint=function(){if(!this.visible){this.clear();this.clearPaintWarnings()}if(this.dirty&&this.visible){this.dirty=false;this.correctCanvasSize();this.context.save();this.clear();this.context.scale(this.scaleFactorX,this.scaleFactorY);var dpiRatio=this.getDPIRatio();if(dpiRatio!==1){this.context.scale(dpiRatio,dpiRatio)}this.rootTransform=this.context.getCurrentTransform();this.setSmooth(false);var i=this.children.length;while(i--){this.children[i].paint(this.context,this.getWidth()*dpiRatio,this.getHeight()*dpiRatio)}this.clearPaintWarnings();this.context.restore()}return};